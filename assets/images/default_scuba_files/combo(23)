YUI.add("hermes-template-group-top-contributors-view",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<div class='error-state'>\n		<p>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.GROUP_TOP_CONTRIBUTORS_LOADING_ERROR"},data:i}))+"<p>\n		<p><a href='#' class='retry'>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.RETRY"},data:i}))+"</a></p>\n	</div>\n"},3:function(e,t,n,r,i,s,o){var u;return"\n"+((u=n["if"].call(t!=null?t:{},t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(4,i,0,s,o),inverse:e.program(6,i,0,s,o),data:i}))!=null?u:"")+"\n"},4:function(e,t,n,r,i){return"\n"},6:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},t!=null?t.groupTopContributors:t,{name:"if",hash:{},fn:e.program(7,i,0,s,o),inverse:e.program(32,i,0,s,o),data:i}))!=null?u:""},7:function(e,t,n,r,i,s,o){var u,a=t!=null?t:{},f=n.helperMissing,l=e.escapeExpression;return((u=n["if"].call(a,t!=null?t.titleKey:t,{name:"if",hash:{},fn:e.program(8,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'\n			<table class="with-avatar">\n				<tbody>\n					<tr class="header contrib-type">\n						<th class="col5">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_RANK"},data:i}))+'</th>\n						<th class="col35"></th>\n						<th class="col30">'+((u=n["if"].call(a,t!=null?t.showPool:t,{name:"if",hash:{},fn:e.program(13,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'</th>\n						<th class="col10 align-right contrib-photos filterable '+((u=(n.ifCond||t&&t.ifCond||f).call(a,t!=null?t.key:t,"===","photoContributors",{name:"ifCond",hash:{},fn:e.program(15,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_PHOTOS"},data:i}))+'</th>\n						<th class="col10 align-right contrib-topics filterable '+((u=(n.ifCond||t&&t.ifCond||f).call(a,t!=null?t.key:t,"===","discussionContributors",{name:"ifCond",hash:{},fn:e.program(15,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+'">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_DISCUSSION_TOPICS"},data:i}))+'</th>\n						<th class="col10 align-right">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_JOINED_GROUP"},data:i}))+"</th>\n					</tr>\n"+((u=n.each.call(a,(u=t!=null?t.groupTopContributors:t)!=null?u.contributors:u,{name:"each",hash:{},fn:e.program(17,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"				</tbody>\n			</table>\n"+((u=n["if"].call(a,t!=null?t.showMoreButton:t,{name:"if",hash:{},fn:e.program(30,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")},8:function(e,t,n,r,i){var s;return"				<h2>\n"+((s=n["if"].call(t!=null?t:{},t!=null?t.showMoreButton:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.program(11,i,0),data:i}))!=null?s:"")+"				</h2>\n"},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'						<a href="/groups/'+a((s=(s=n.groupId||(t!=null?t.groupId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"groupId",hash:{},data:i}):s))+'/members/" data-track="groupTopContributorsHeadingClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"</a>\n"},11:function(e,t,n,r,i){return"						"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"\n"},13:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.CONTRIBUTORS_LATEST_PHOTO"},data:i}))},15:function(e,t,n,r,i){return"selected"},17:function(e,t,n,r,i,s,o){var u,a=t!=null?t:{},f=n.helperMissing,l=e.escapeExpression,c=e.lambda;return"					<tr>\n						<td>\n							"+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{count:t!=null?t.rank:t,intlName:"groups.RANKING"},data:i}))+'\n						</td>\n						<td class="emphasis">\n\n							<a data-person-nsid="'+l(c(t!=null?t.nsid:t,t))+'" title="'+l(c(t!=null?t.displayname:t,t))+'" href="'+l(c(t!=null?t.poolUrl:t,t))+'" data-track="groupTopContributorsUserClick">\n								<span data-person-nsid="'+l(c(t!=null?t.nsid:t,t))+'" class="avatar person tiny" style="background-image:url('+l(c(t!=null?t.avatarUrl:t,t))+');"></span>'+l(c(t!=null?t.displayname:t,t))+"\n"+((u=n["if"].call(a,t!=null?t.enabledNewPro:t,{name:"if",hash:{},fn:e.program(18,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"							</a>\n\n						</td>\n						<td>\n"+((u=n["if"].call(a,o[2]!=null?o[2].showPool:o[2],{name:"if",hash:{},fn:e.program(21,i,0,s,o),inverse:e.program(26,i,0,s,o),data:i}))!=null?u:"")+'						</td>\n						<td class="align-right">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{num:t!=null?t.groupPhotoCount:t,intlName:"common.NUMBER"},data:i}))+'</td>\n						<td class="align-right">'+l((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{num:t!=null?t.groupDiscussionCount:t,intlName:"common.NUMBER"},data:i}))+'</td>\n						<td class="align-right">\n'+((u=(n.friendlySinceDate||t&&t.friendlySinceDate||f).call(a,t!=null?t.dateJoined:t,false,true,{name:"friendlySinceDate",hash:{},fn:e.program(28,i,0,s,o),inverse:e.noop,data:i}))!=null?u:"")+"						</td>\n					</tr>\n"},18:function(e,t,n,r,i){var s;return"									"+((s=n["if"].call(t!=null?t:{},t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},19:function(e,t,n,r,i){return'<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>'},21:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},t!=null?t.latestPhotoUrl:t,{name:"if",hash:{},fn:e.program(22,i,0,s,o),inverse:e.program(24,i,0,s,o),data:i}))!=
null?u:""},22:function(e,t,n,r,i,s,o){var u,a=e.lambda,f=e.escapeExpression;return'									<a title="'+f(a(t!=null?t.latestPhotoTitle:t,t))+'" href="'+f(a(t!=null?t.latestPhotoUrl:t,t))+"in/pool-"+f(a((u=o[2]!=null?o[2].group:o[2])!=null?u.pathAlias:u,t))+'/" data-track="groupTopContributorsLatestPhotoClick">'+f(a(t!=null?t.latestPhotoTitle:t,t))+"</a>\n"},24:function(e,t,n,r,i){return"									-\n"},26:function(e,t,n,r,i){return"								&nbsp;\n"},28:function(e,t,n,r,i){return"								"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{time:t!=null?t.time:t,intlName:t!=null?t.intlName:t},data:i}))+"\n"},30:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'			<div class="see-all-block">\n				<a href="/groups/'+a((s=(s=n.groupId||(t!=null?t.groupId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"groupId",hash:{},data:i}):s))+'/members/" class="see-all-members" data-track="groupTopContributorsViewAllClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.SEE_ALL_MEMBERS"},data:i}))+"</a>\n			</div>\n"},32:function(e,t,n,r,i){return"			"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.NO_CONTRIBUTORS"},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i,s,o){var u;return(u=n["if"].call(t!=null?t:{},t!=null?t.error:t,{name:"if",hash:{},fn:e.program(1,i,0,s,o),inverse:e.program(3,i,0,s,o),data:i}))!=null?u:""},useData:!0,useDepths:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-top-contributors-view",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-top-contributors-view",function(e){e.namespace("Views")[this.name]=e.Base.create("group-top-contributors-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.titleKey=e.titleKey,this.showPool=e.showPool,e.sort="all",this.get("container").get("innerHTML")===""&&this.setContainerWithTemplate("group-top-contributors-view",{loading:!0,error:!1}),this},loadState:function(){var t=this;return(new e.FlickrPromise({groupTopContributors:this.appContext.getModel("group-top-contributors-models",this.groupId),group:this.appContext.getModel("group-models",this.groupId)})).then(function(e){t.set("groupTopContributors",e.groupTopContributors),t.set("group",e.group)})},buildContainer:function(e){var t=this.get("group"),n,r,i=this;return t?(n=t.getValue("urlPoolPage")+"/",r=this.get("groupTopContributors").toJSON(),e=e||"photoContributors",r[e].forEach(function(e){e.poolUrl=n+(e.pathAlias||e.nsid),e.enabledNewPro=i.appContext.flipper.isFlipped("enable-pro-badge")}),r.contributors=r[e],r.contributors.length===0?this.setContainerHTML(""):this.setContainerWithTemplate("group-top-contributors-view",{groupTopContributors:r,group:t.toJSON(),groupId:this.groupId,titleKey:this.titleKey,key:e,showMoreButton:!0,loading:!1,error:!1,showPool:this.showPool})):this.setContainerHTML(""),this},buildErrorContainer:function(){this.setContainerWithTemplate("group-top-contributors-view",{error:!0})},activate:function(){var e=this.get("container"),t,n=this,r;return e&&(t=e.one(".contrib-topics"),r=e.one(".contrib-photos"),r&&t&&(this.registerEventHandler(r.on("click",function(e){e.preventDefault(),n.buildContainer("photoContributors"),n.activate()})),this.registerEventHandler(t.on("click",function(e){e.preventDefault(),n.buildContainer("discussionContributors"),n.activate()})))),this}})},"@VERSION@",{requires:["flutil","flickr-promise","flickr-view","hermes-template-group-top-contributors-view"],langBundles:["groups","common","relative-dates"]});
YUI.add("hermes-template-group-18-plus-confirmation",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<h1>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"groups.EIGHTTEEN_PLUS_SIGNEDIN"},data:i}))+'</h1>\n	<a href="https://www.flickr.com" class="butt alt large" data-action="decline">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"groups.NO"},data:i}))+'</a>\n	<a href="#" class="butt large" data-action="confirm">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"groups.YES"},data:i}))+"</a>\n"},3:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<h1>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.EIGHTEEN_PLUS_SIGNEDOUT"},data:i}))+'</h1>\n	<a href="/signin" class="butt large">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.signedIn:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-18-plus-confirmation",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-18-plus-confirmation-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="group-18-plus-confirmation"></div>'),this.groupId=e.groupId,this.groupPoolPage=e.groupPoolPage||!1,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("group-18-plus-confirmation",{signedIn:this.appContext.getViewer().signedIn}),this},activate:function(){if(!YUI.Env.isServer){var t;this.container=this.get("container").get("parentNode"),this.removeLoadingState(),this.localStorageKey=this.groupId+this.appContext.getViewer().nsid,e.StorageHelper.getItem(this.localStorageKey)?(this.container.removeClass("needsInterstitial"),this.get("container").remove(),this.loadPage()):(t={":confirm":function(t){t.preventDefault(),e.StorageHelper.setItem(this.localStorageKey,!0),this.loadPage(),this.get("container").remove()},":decline":function(t){t.preventDefault(),window.location.href=e.url()}},this.attachEvents(t))}return this},loadPage:function(){this.groupPoolPage?this.displayPhotos():this.fire("clickSee18Plus")},displayPhotos:function(){this.fire("subviewViewEvent","interstitialClickThru")},removeLoadingState:function(){var e=this.get("container").get("parentNode");e.removeClass("initial-loading")}})},"@VERSION@",{requires:["flickr-view","hermes-template-group-18-plus-confirmation","storage-helper"],langBundles:["common","groups"]});
YUI.add("hermes-template-group-pool-preview",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"	<div class='hidden-state'>\n		<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.POOL_MEMBERS_ONLY"},data:i}))+"<p>\n	</div>\n"},3:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.error:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))!=null?s:""},4:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"		<div class='error-state'>\n			<p>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.GROUP_POOL_LOADING_ERROR"},data:i}))+"<p>\n			<p><a href='#' class='retry'>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.RETRY"},data:i}))+"</a></p>\n		</div>\n\n"},6:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:""},7:function(e,t,n,r,i){return'			<div class="loading">\n				<div class="balls"></div>\n			</div>\n'},9:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.display:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.program(17,i,0),data:i}))!=null?s:""},10:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return"\n"+((s=n["if"].call(u,t!=null?t.titleKey:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				"+((s=n["if"].call(u,t!=null?t.canAddPhotos:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n\n				<ul class="pool-overview-actions">\n\n'+((s=n["if"].call(u,t!=null?t.isAdmin:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+'					<li class="view-all-li">\n						<a href="'+f((o=(o=n.viewAllUrl||(t!=null?t.viewAllUrl:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"viewAllUrl",hash:{},data:i}):o))+'" class="view-all" data-track="groupPoolPreviewViewAllClick">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{count:t!=null?t.total:t,intlName:"groups.VIEW_X_PHOTOS"},data:i}))+'</a>\n					</li>\n\n					<li>\n						<a class="search-icon" data-track="addContextGroupPool" title="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"groups.SEARCH_POOL"},data:i}))+'"></a>\n					</li>\n				</ul>\n\n				<div class="display-photolist-rows">\n					'+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t.displayPhotolistRows:t,{name:"outlet",hash:{},data:i}))+"\n				</div>\n"},11:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<h2>\n						<a href="'+a((s=(s=n.viewAllUrl||(t!=null?t.viewAllUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"viewAllUrl",hash:{},data:i}):s))+'" data-track="groupPoolPreviewHeadingClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"</a>\n					</h2>\n"},13:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<a href="'+a((s=(s=n.addSomeUrl||(t!=null?t.addSomeUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"addSomeUrl",hash:{},data:i}):s))+'" class="butt add" data-track="groupPoolPreviewAddClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_PHOTO"},data:i}))+"</a>"},15:function(e,t,n,r,i){return'						 <li class="change-number-rows">\n						 	<a href="#">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{count:t!=null?t.poolPreviewRowsVisibleCount:t,intlName:"groups.POOL_PREVIEW"},data:i}))+'</a>\n						 	<span class="change-number-rows-arrow"></span>\n						 </li>\n'},17:function(e,t,n,r,i){var s,o=t!=null?t:{};return'				<div class="empty-state">\n'+((s=n["if"].call(o,t!=null?t.canAddPhotos:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n.unless.call(o,t!=null?t.canAddPhotos:t,{name:"unless",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</div>\n"},18:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"						<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.BE_THE_FIRST"},data:i}))+'</p>\n						<p><a href="'+a((s=(s=n.addSomeUrl||(t!=null?t.addSomeUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"addSomeUrl",hash:{},data:i}):s))+'" data-track="groupPoolPreviewEmptyAddClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_SOME_PHOTOS"},data:i}))+"</a></p>\n"},20:function(e,t,n,r,i){return"						<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.NO_PHOTOS"},data:i}))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.permissionDenied:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-pool-preview",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-pool-preview-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.titleKey=e.titleKey,this.setContainerWithTemplate("group-pool-preview",{loading:!0,error:!1,titleKey:this.titleKey}),this.initialHeight=150,this.initialWidth=1060,this.hasPhotos=!1,this.poolRowsLink=".change-number-rows",this},loadState:function(){var t=this;return(new e.FlickrPromise({groupPool:this.appContext.getModel("group-pool-models",this.groupId),groupActivity:this.appContext.getModel("group-activity-models",this.groupId),groupInfo:this.appContext.getModel("group-info-models",this.groupId)})).then(function(e){return t.set("groupsPoolModel",e.groupPool),t.set("groupActivityModel",e.groupActivity),t.set("groupInfo",e.groupInfo),t.groupPathAlias="pool-"+e.groupInfo.getValue("group").getValue("pathAlias"),e.groupPool.getValue("photoPageList").getPage({page:1,perPage:50}).then(function(e){e.length>0&&(t.hasPhotos=!0),t.set("photos",e);if(YUI.Env.isServer)return t.renderPoolPhotoList()})},function(e){if(e.code!==2)throw e;t.permissionDenied=!0})},buildContainer:function(e){var t=this.get("groupInfo"),n=t.getValue("pathAlias")||t.getValue("id"),r="/groups/"+n+"/pool/add/",i=0,s,o=t&&t.getValue("throttle"),u=!1;return this.hasPhotos&&(s=this.get("photos"),i=this.get("groupsPoolModel").getValue("group").getValue("poolCount")),o&&(u=o.mode!=="disabled"&&o.remaining>0||o.mode==="none",u&&(u=t.getValue("group").getValue("isMember"))),this.setContainerWithTemplate("group-pool-preview",{display:s,url:r,poolPreviewRowsVisibleCount:t.getValue("poolPreviewRowsVisibleCount"),isAdmin:t.getValue("group").getValue("isAdmin"),titleKey:this.titleKey,addSomeUrl:"/groups/"+n+"/pool/add/",viewAllUrl:"/groups/"+n+"/pool/",permissionDenied:this.permissionDenied,total:i,loading:!1,error:!1,canAddPhotos:u,displayPhotolistRows:this.photoListDisplayRows||""}),!YUI.Env.isServer&&s&&i>0&&!e&&this.renderPoolPhotoList(),this},handleSearchClick:function(t){e.fire("add-context-to-search-field",{name:this.get("groupInfo").getValue("group").getValue("title"),id:this.groupId,type:"group",scope:"photos"}),t.target.addClass("active")},handleSearchContextRemoval:function(){this.get("container").one(".search-icon").removeClass("active")},activate:function(){var t=this;this.appContext.getViewer().signedIn&&this.get("groupActivityModel").registry.groupViewed({group_id:this.groupId,user_id:this.appContext.getViewer().nsid,type:"pool"},this.appContext),this.hasPhotos&&(this.registerEventHandler(this.get("container").delegate("click",this.onChangeNumberOfRowsLinkClick.bind(this),this.poolRowsLink)),this.registerEventHandler(this.get("groupInfo").on("valuesChanged",function(e){e.poolPreviewRowsVisibleCount&&t.numberOfRowsChanged()})));var n=this.get("container").one(".search-icon");return n&&this.registerEventHandler(n.on("click",this.handleSearchClick.bind(this))),this.registerEventHandler(e.on("remove-context-in-search-field",this.handleSearchContextRemoval.bind(this))),this},destroy:function(){return this.photoList&&this.photoList.destroy(),this},renderPoolPhotoList:function(){var t=this.get("groupInfo"),n,r,i=this;this.photoList&&this.photoList.destroy(),this.photoList=new e.Views["photo-list-view"]({appContext:this.appContext,keepAwakeOnScroll:!0,photoListConfig:{keepAwakeOnScroll:!0,photos:this.get("photos"),paginateOnScroll:!1,modelParams:{modelIdOrAttributes:this.groupId,registryName:"group-pool-models",collectionAttributeName:"photoPageList",fetchParams:{}},contextSuffix:this.groupPathAlias,layout:{keepAwakeOnScroll:!0,maxNumRows:t.getValue("poolPreviewRowsVisibleCount"),containerPadding:{top:0,right:0,bottom:8,left:0},targetRowHeight:150},parentName:this.name}}),n=this.photoList.initialize(),r=this.get("container").one(".photo-list-view"),r&&r.remove();if(YUI.Env.isServer)return n.then(function(){i.photoListDisplayRows=i.photoList.get("container")});this.get("container").one(".display-photolist-rows").append(this.photoList.get("container"))},onChangeNumberOfRowsLinkClick:function(t,n){t.preventDefault();var r=this,i=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorOffsetHorizontal:14,dismissOnOverlayClick:!0,anchorElement:this.get("container").one(".change-number-rows-arrow"),classList:["group-nb-rows-droparound"],menuItems:[{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:1,nb:1}),rows:1},{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:2,nb:2}),rows:2},{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:4,nb:4}),rows:4},{text:this.intlMessage({intlName:"groups.POOL_PREVIEW",count:8,nb:8}),rows:8}]});return i.show(),this.registerEventHandler(i.on("selected",function(e){e&&e.menuItem&&e.menuItem.rows&&(r.changeNumberOfRows.call(r,e.menuItem.rows),i.close())}),this),this},changeNumberOfRows:function(t){var n=this.get("groupInfo"),r=this,i=n.getValue("poolPreviewRowsVisibleCount");if(!t)return;n.getValue("group").getValue("isAdmin")&&this.appContext.callAPI("flickr.groups.admin.setPoolRows",{group_id:this.get("groupInfo").getValue("id"),row_count:t}).then(function(r){n.setValue("poolPreviewRowsVisibleCount",t)},function(s){n.setValue("poolPreviewRowsVisibleCount",i),s&&s.stat==="fail"&&(r.errorModal=new e.Views.FluidModal({appContext:r.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:"Oops!",actionButtonLabel:r.intlMessage({intlName:"common.OK"}),message:s.message,darkOverlay:!0}),r.errorModal.show())})},numberOfRowsChanged:function(){this.buildContainer(!0),this.renderPoolPhotoList()}})},"@VERSION@",{requires:["flutil","flickr-view","photo-list-view","flickr-promise","hermes-template-group-pool-preview","fluid-droparound-view"],langBundles:["common","groups","photo-list"]});
YUI.add("hermes-lang-photo-list",function(e,t){e.Intl.add("hermes/photo-list","en-US",{FETCHING_PHOTOS:["Fetching photos..."],FETCHING_MORE_PHOTOS:["Fetching more photos..."],SEARCHING:["Searching..."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-group-home-page",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return((s=n.unless.call(t!=null?t:{},t!=null?t.isServerRendered:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+" needsInterstitial"},2:function(e,t,n,r,i){return" initial-loading"},4:function(e,t,n,r,i){return" with-fluid-subnav "},6:function(e,t,n,r,i){return"\n		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["group-18-plus-confirmation-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"},8:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return"\n"+((s=n["if"].call(u,(s=t!=null?t.notification:t)!=null?s.type:s,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showPendingCount:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showMemberPendingCount:t,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n		<div class="main '+f((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'" role="main">\n\n'+((s=n["if"].call(u,t!=null?t["groups-toolbar-view"]:t,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-blast-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(u,t!=null?t.showPool:t,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.program(28,i,0),data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showDiscussion:t,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.program(32,i,0),data:i}))!=null?s:"")+"\n		"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-top-contributors-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(u,(s=t!=null?t["group-info"]:t)!=null?s.secureDescription:s,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t["group-info"]:t)!=null?s.secureRules:s,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.additionalField:t,{name:"if",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n		</div>\n\n"},9:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing;return'			<div class="notification-block '+((s=n["if"].call(u,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="'+e.escapeExpression((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'">\n'+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","notadded",{name:"ifCond",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","pending",{name:"ifCond",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","donepending",{name:"ifCond",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=(n.ifCond||t&&t.ifCond||a).call(u,(s=t!=null?t.notification:t)!=null?s.type:s,"===","deleted",{name:"ifCond",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</div>\n			</div>\n"},10:function(e,t,n,r,i){return" move-to-top "},12:function(e,t,n,r,i){var s;return"						"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{url:(s=t!=null?t["group-info"]:t)!=null?s.groupPoolAddURL:s,intlName:"groups.NOT_ADDED_NOTIFICATION"},data:i}))+"\n"},14:function(e,t,n,r,i){var s;return"						"+e.escapeExpression((n.intlHTMLMessage||t&&t.intlHTMLMessage||n.helperMissing).call(t!=null?t:{},{name:"intlHTMLMessage",hash:{url:(s=t!=null?t["group-info"]:t)!=null?s.groupPoolAddURL:s,intlName:"groups.PENDING_NOTIFICATION"},data:i}))+"\n"},16:function(e,t,n,r,i){return"						"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.DONE_PENDING_NOTIFICATION"},data:i}))+"\n"},18:function(e,t,n,r,i){return"						"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.DELETED_NOTIFICATION"},data:i}))+"\n"},20:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'			<div class="notification-block '+((s=n["if"].call(u,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="'+f((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'">\n					'+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{url:t!=null?t.pendingAdminURL:t,pendingCount:t!=null?t.pendingCount:t,intlName:"groups.PENDING_COUNT_NOTIFICATION"},data:i}))+"\n				</div>\n			</div>\n"},22:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'			<div class="notification-block '+((s=n["if"].call(u,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n				<div class="'+f((o=(o=n.centeredContainerClass||(t!=null?t.centeredContainerClass:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"centeredContainerClass",hash:{},data:i}):o))+'">\n					'+f((n.intlHTMLMessage||t&&t.intlHTMLMessage||a).call(u,{name:"intlHTMLMessage",hash:{url:t!=null?t.pendingMemberURL:t,pendingCount:t!=null?t.pendingMemberCount:t,intlName:"groups.PENDING_MEMBER_COUNT_NOTIFICATION"
},data:i}))+"\n				</div>\n			</div>\n"},24:function(e,t,n,r,i){return"			"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["groups-toolbar-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},26:function(e,t,n,r,i){return"			"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["group-pool-preview-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},28:function(e,t,n,r,i){return"			<div class='hidden-state'>\n				<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.POOL_MEMBERS_ONLY"},data:i}))+"</p>\n			</div>\n"},30:function(e,t,n,r,i){return"			"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["group-discussion-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},32:function(e,t,n,r,i){return"			<div class='hidden-state'>\n				<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.DISCUSSION_MEMBERS_ONLY"},data:i}))+"</p>\n			</div>\n"},34:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"			<div class='group-description'>\n				<h2>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_DESCRIPTION"},data:i}))+"</h2>\n				"+a((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||u).call(o,(s=t!=null?t["group-info"]:t)!=null?s.secureDescription:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+"\n			</div>\n"},36:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"			<div class='group-rules'>\n				<h2>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_RULES"},data:i}))+"</h2>\n				"+a((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||u).call(o,(s=t!=null?t["group-info"]:t)!=null?s.secureRules:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+"\n			</div>\n"},38:function(e,t,n,r,i){var s,o=t!=null?t:{};return"			<div class='additional-info'>\n				<h2>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_ADDITIONAL_INFO"},data:i}))+"</h2>\n				<ul>\n"+((s=n.each.call(o,t!=null?t.additionalField:t,{name:"each",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</ul>\n			</div>\n"},39:function(e,t,n,r,i){return"					<li>"+e.escapeExpression((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||n.helperMissing).call(t!=null?t:{},t!=null?t.field:t,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["global-nav-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div role="main" class="'+((s=n["if"].call(o,t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+" "+((s=n["if"].call(o,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n\n	'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["fluid-group-coverphoto-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["fluid-magic-groups-subnav-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(o,t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.program(8,i,0),data:i}))!=null?s:"")+"\n	"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["opt-out-widget-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n</div>\n\n"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["signup-footer-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["footer-full-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-home-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-opt-out-widget",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" hidden"},3:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'			<input type="hidden" name="'+f((s=(s=n.name||(t!=null?t.name:t))!=null?s:u,typeof s===a?s.call(o,{name:"name",hash:{},data:i}):s))+'" value="'+f((s=(s=n.value||(t!=null?t.value:t))!=null?s:u,typeof s===a?s.call(o,{name:"value",hash:{},data:i}):s))+'">\n'},5:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression((s=(s=n.optOutButtonHoverText||(t!=null?t.optOutButtonHoverText:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"optOutButtonHoverText",hash:{},data:i}):s))+'"'},7:function(e,t,n,r,i){var s;return' title="'+e.escapeExpression((s=(s=n.optOutFeedbackLinkHoverText||(t!=null?t.optOutFeedbackLinkHoverText:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"optOutFeedbackLinkHoverText",hash:{},data:i}):s))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="opt-out-widget'+((s=n["if"].call(u,t!=null?t.hidden:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n	<form action="/help/optin" id="opt-out-form" method="post">\n'+((s=n.each.call(u,t!=null?t.optOutFlippers:t,{name:"each",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		<input type="hidden" name="redirect_url" value="'+l((o=(o=n.optOutRedirectUrl||(t!=null?t.optOutRedirectUrl:t))!=null?o:a,typeof o===f?o.call(u,{name:"optOutRedirectUrl",hash:{},data:i}):o))+'">\n		<input type="hidden" name="csrf" value="'+l((o=(o=n.csrf||(t!=null?t.csrf:t))!=null?o:a,typeof o===f?o.call(u,{name:"csrf",hash:{},data:i}):o))+'">\n		<div class="optout-toggle">\n			<span class="label-beta">'+l((o=(o=n.optOutLabelText||(t!=null?t.optOutLabelText:t))!=null?o:a,typeof o===f?o.call(u,{name:"optOutLabelText",hash:{},data:i}):o))+"</span>\n			<button"+((s=n["if"].call(u,t!=null?t.optOutButtonHoverText:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'></button>\n			<span class="divider"></span>\n			<a href="'+l((o=(o=n.optOutFeedbackUrl||(t!=null?t.optOutFeedbackUrl:t))!=null?o:a,typeof o===f?o.call(u,{name:"optOutFeedbackUrl",hash:{},data:i}):o))+'" target="_new"'+((s=n["if"].call(u,t!=null?t.optOutFeedbackLinkHoverText:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'><i class="feedback">&nbsp;</i></a>\n		</div>\n	</form>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/opt-out-widget",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("opt-out-widget-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.optOutFlippers=e.optOutFlippers||[],this.optOutLabelText=e.optOutLabelText||this.intlMessage({intlName:"common.BETA"}),this.optOutFeedbackUrl=e.optOutFeedbackUrl||"",this.optOutFeedbackLinkHoverText=e.optOutFeedbackLinkHoverText||"",this.optOutButtonHoverText=e.optOutButtonHoverText||"",this.optOutCookieField=e.optOutCookieField||null,this.hidden=e.hidden||!1},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("opt-out-widget",{optOutFlippers:this.optOutFlippers,optOutLabelText:this.optOutLabelText,optOutFeedbackUrl:this.optOutFeedbackUrl,optOutFeedbackLinkHoverText:this.optOutFeedbackLinkHoverText,optOutButtonHoverText:this.optOutButtonHoverText,csrf:this.appContext.auth.csrf||"",optOutRedirectUrl:YUI.Env.isServer?this.appContext.request.url:window.location.pathname,hidden:this.hidden}),this},activate:function(){var t,n=this;return this.widget=this.get("container").one(".opt-out-widget"),this.footerContainer=e.one(".footer-full-view"),this.footer=this.footerContainer?this.footerContainer.one("footer.foot"):null,this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.updateWidgetPosition.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.updateWidgetPosition.bind(this))),this.updateWidgetPosition(),this.optOutCookieField&&(t=this.widget.one("#opt-out-form"),t&&this.registerEventHandler(t.on("submit",function(r){r.halt(),e.use("opt-outer",function(e){e.optOut(n.optOutCookieField),setTimeout(function(){t.submit()},100)})}))),this},onParentViewEvent:function(e,t){if(t&&t[0]==="footerDisplayChanged")return this.updateWidgetPosition(),!1;t&&t[0]==="showOptOutWidget"&&this.hidden&&(this.widget||(this.widget=this.get("container").one(".opt-out-widget")),this.widget&&this.widget.removeClass("hidden"),this.hidden=!1)},updateWidgetPosition:function(t){var n;this.footer&&(n=e.config.win.pageYOffset+this.appContext.viewportData.getHeight(),this.footerContainer.getComputedStyle("display")!=="none"&&n>=this.footer.getY()?this.widget.hasClass("hugging-footer")||this.widget.addClass("hugging-footer"):this.widget.hasClass("hugging-footer")&&this.widget.removeClass("hugging-footer"))}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-opt-out-widget"],langBundles:["common"]});
YUI.add("hermes-template-group-blast",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'	<div class="blast-block">\n		<a href="'+u(o((s=t!=null?t["group-blast"]:t)!=null?s.blastUserUrl:s,t))+'" data-track="groupBlastUserClick">'+u(o((s=t!=null?t["group-blast"]:t)!=null?s.blastDisplayName:s,t))+"</a>\n		"+((s=n["if"].call(a,t!=null?t.blastStatus:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(a,t!=null?t.addGroupBlast:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		<span class="blast-date">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{blastDateAdded:(s=t!=null?t["group-blast"]:t)!=null?s.blastDateAdded:s,intlName:"groups.BLAST_DATE_ADDED"},data:i}))+'</span>\n		<div style="clear:both;"></div>\n\n		<span class="blast-message '+((s=n["if"].call(a,t!=null?t.addGroupBlast:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n			<div class="blast-message-display">\n				<span class="blast-message-secure">\n					'+u((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||f).call(a,(s=t!=null?t["group-blast"]:t)!=null?s.blastMessageSecure:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+'\n				</span>\n\n			</div>\n			<div class="blast-message-edit">\n				<textarea class="blast-message-edited" wrap="on">'+u((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||f).call(a,(s=t!=null?t["group-blast"]:t)!=null?s.blastMessage:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+'</textarea>\n				<textarea tabIndex="-1" class="blast-message-edited-false" style="display:none;" wrap="on"></textarea>\n\n				<button class="alt blast-cancel-button">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:i}))+'</button>\n				<button class="blast-done-button">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.DONE"},data:i}))+"</button>\n			</div>\n\n		</span>\n	</div>\n"},2:function(e,t,n,r,i){return'<span class="blast-user-status">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:t!=null?t.blastStatus:t},data:i}))+"</span>"},4:function(e,t,n,r,i){return'			<span class="edit-icon"></span>\n			<span class="delete-icon"></span>\n'},6:function(e,t,n,r,i){return"is-editable"},8:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.addGroupBlast:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:""},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'	<div class="blast-empty">\n		<div class="empty-state">\n			<p>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.EMPTY_BLAST"},data:i}))+'</p>\n			<p>\n				<a class="add-blast-block">\n				'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.ADD_BLAST"},data:i}))+'\n				</a>\n			</p>\n		</div>\n		<div class="blast-message-edit">\n			<p>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.CREATE_BLAST"},data:i}))+'</p>\n			<textarea class="blast-message-edited">'+a((n.renderTrustedMarkupWithLineBreaks||t&&t.renderTrustedMarkupWithLineBreaks||u).call(o,(s=t!=null?t["group-blast"]:t)!=null?s.blastMessage:s,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:i}))+'</textarea>\n			<textarea tabIndex="-1" class="blast-message-edited-false" style="display:none;" wrap="on"></textarea>\n			<button class="alt blast-cancel-button">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:i}))+'</button>\n			<button class="blast-done-button">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.DONE"},data:i}))+"</button>\n		</div>\n	</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return"\n"+((s=n["if"].call(t!=null?t:{},(s=t!=null?t["group-blast"]:t)!=null?s.blastMessageSecure:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(8,i,0),data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-blast",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-blast-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.editMode=!1,this.disableEditing=!1,this},loadState:function(){var t=this;return(new e.FlickrPromise({groupBlast:this.appContext.getModel("group-blast-models",this.groupId),groupInfo:this.appContext.getModel("group-info-models",this.groupId)})).then(function(e){t.set("groupBlastModel",e.groupBlast),t.set("groupInfoModel",e.groupInfo),t.set("groupModel",e.groupInfo.getValue("group"))})},buildContainer:function(){var e=this.get("groupBlastModel"),t=this.get("groupModel").toJSON(),n,r,i,s=t.isAdmin;return e&&(r=["groups.BLAST_INVITED_MEMBER","groups.BLAST_PENDING_MEMBER","groups.BLAST_GROUP_MEMBER","groups.BLAST_MODERATOR","groups.BLAST_ADMIN"],i=r[e.getValue("blastUserStatus")]),n={"group-blast":e.toJSON(),blastStatus:i,addGroupBlast:s,editMode:this.editMode},this.setContainerWithTemplate("group-blast",n),this},activate:function(){var e=this.get("container"),t=e.one(".blast-block"),n=this;return t?(e.one(".edit-icon")&&this.registerEventHandler(e.one(".edit-icon").on("click",function(t){var n=e.one(".blast-message-edited");t.preventDefault(),this.disableEditing||(e.one(".blast-block").addClass("editing"),n&&(n.focus(),n.select()))})),e.one(".delete-icon")&&this.registerEventHandler(e.one(".delete-icon").on("click",function(t){t.preventDefault(),this.disableEditing||n.deleteBlast(e.one(".blast-block"),e.one(".blast-message-secure"))})),e.one(".blast-done-button")&&this.registerEventHandler(e.one(".blast-done-button").on("click",function(t){t.preventDefault(),n.updateBlast(e.one(".blast-block"),e.one(".blast-message-secure"))})),e.one(".blast-cancel-button")&&this.registerEventHandler(e.one(".blast-cancel-button").on("click",function(e){e.preventDefault(),n.buildContainer(),n.activate()}))):(e.one(".blast-done-button")&&this.registerEventHandler(e.one(".blast-done-button").on("click",function(t){t.preventDefault(),n.updateBlast(e.one(".blast-empty"),e.one(".empty-state"),!0)})),e.one(".blast-cancel-button")&&this.registerEventHandler(e.one(".blast-cancel-button").on("click",function(e){e.preventDefault(),n.buildContainer(),n.activate()})),e.one(".add-blast-block")&&this.registerEventHandler(e.one(".add-blast-block").on("click",function(t){t.preventDefault(),this.disableEditing||(e.one(".blast-empty").addClass("editing"),e.one(".blast-message-edited")&&e.one(".blast-message-edited").focus())}))),e.one(".blast-message-edited")&&this.setupBlastEditing(e.one(".blast-message-edited"),e.one(".blast-message-edited-false")),this},setupBlastEditing:function(e,t){this.registerEventHandler(e.on("input",function(n){t.set("value",e.get("value")),e.setStyle("height",t._node.scrollHeight+"px"),e.setStyle("minHeight",t._node.scrollHeight+"px")})),this.registerEventHandler(e.on("keydown",function(n){t.set("value",e.get("value")),e.setStyle("height",t._node.scrollHeight+"px"),e.setStyle("minHeight",t._node.scrollHeight+20+"px")}))},updateBlast:function(t,n,r){var i=this.get("groupBlastModel"),s=this.get("container"),o=this,u=this.get("groupModel").toJSON(),a=i.getValue("blastMessageSecure"),f=s.one(".blast-message-edited").get("value"),l,c=496;if(f.trim()===""){this.deleteBlast(t,n);return}if(f.length>c){l=new e.Views.FluidModal({appContext:o.appContext,title:o.intlMessage({intlName:"common.OOPS"}),message:o.intlMessage({intlName:"groups.LONG_BLAST_ERROR",count:f.length}),actionButtonLabel:o.intlMessage({intlName:"common.OK"}),showCancelButton:!1}),l.show();return}n.set("text",f),this.disableEditing=!0,t.removeClass("editing"),i.registry.remote.update({blast:f,id:this.groupId,user:this.appContext.getViewer().nsid,status:u.isAdmin?4:3},this.appContext).then(function(e){o.buildContainer(),o.activate(),this.disableEditing=!1},function(t){l=new e.Views.FluidModal({appContext:o.appContext,title:o.intlMessage({intlName:"common.OOPS"}),message:o.intlMessage({intlName:"groups.UPDATE_BLAST_ERROR"}),actionButtonLabel:o.intlMessage({intlName:"common.OK"}),showCancelButton:!1}),l.show(),n.setHTML(a),this.disableEditing=!1})},deleteBlast:function(t,n){var r=this.get("groupBlastModel"),i=this,s=this.get("groupModel").toJSON(),o=r.getValue("blastMessageSecure"),u="";n.set("text",this.intlMessage({intlName:"groups.REMOVING_BLAST"})),this.disableEditing=!0,t.removeClass("editing"),r.registry.remote.update({blast:u,id:this.groupId,user:this.appContext.getViewer().nsid,status:s.isAdmin?4:3},this.appContext).then(function(e){i.buildContainer(),i.activate(),this.disableEditing=!1},function(t){var r=new e.Views.FluidModal({appContext:i.appContext,title:i.intlMessage({intlName:"common.OOPS"}),message:i.intlMessage({intlName:"groups.DELETE_BLAST_ERROR"}),actionButtonLabel:i.intlMessage({intlName:"common.OK"}),showCancelButton:!1});r.show(),n.setHTML(o),this.disableEditing=!1})}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-group-blast","fluid-modal-view"],optional:["group-blast-models"],langBundles:["common","groups"]});
YUI.add("fluid-magic-groups-subnav-view",function(e){"use strict";var t;e.FlickrView.create(this.name,e.namespace("Views")["fluid-subnav-view"],[],{langBundles:this.details.langBundles,initializer:function(e){return e.hasJoin=!0,e.fullBleed=!1,this.appStateParams=e,this.groupId=e.groupId||e.nsid,t=this.intlMessage({intlName:"groups.GROUPS"})+" BETA",this.constructor.superclass.initializer.call(this,e)},loadState:function(){var t=this,n=[];return n.push(t.appContext.getModel("group-info-models",this.groupId)),e.Promise.all(n).then(function(e){var n=e[0];t.set("models",n),t.populateUrls(n),t.set("canEditCoverPhoto",n.getValue("group").getValue("isAdmin"))},function(e){t.set("canEditCoverPhoto",!1)})},populateUrls:function(t){var n=t.getValue("group"),r=n.getValue("isAdmin")||n.getValue("isModerator"),i=n.getValue("isMember"),s=i||n.getValue("showPoolToNonMembers"),o=i||n.getValue("showDiscussionToNonMembers"),u=this,a,f;a=e.URLHelper.generateGroupUrls(t.getValue("group")),this.set("links",[{name:this.intlMessage({intlName:"header.OVERVIEW"}),id:"overview",href:a.about},{name:this.intlMessage({intlName:"header.ADMINISTRATION"}),id:"admin",href:a.admin,disabled:function(){return!r}},{name:this.intlMessage({intlName:"header.DISCUSSIONS"}),id:"discussions",href:a.discussions,disabled:function(){return!o}},{name:this.intlMessage({intlName:"header.PHOTOS"}),id:"pool",href:a.photos,disabled:function(){return!s}},{name:this.intlMessage({intlName:"header.MEMBERS"}),id:"members",href:a.members},{name:this.intlMessage({intlName:"header.MAP"}),id:"map",href:a.map},{name:this.intlMessage({intlName:"header.INVITE"}),id:"invite",href:a.invite,disabled:function(){return!i}}]),this.get("selected")&&(f=this.get("links").filter(function(e){return e.id===u.get("selected")}),f[0].selected=!0)}})},"@VERSION@",{requires:["flickr-view","fluid-subnav-view","url-helper"],langBundles:["header","groups","common"]});
YUI.add("hermes-template-fluid-coverphoto",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'style="background-image:url('+e.escapeExpression(e.lambda((s=(s=t!=null?t.coverPhoto:t)!=null?s.urls:s)!=null?s.h:s,t))+')"'},3:function(e,t,n,r,i){return'			<div class="cover-photo-edit" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"header.EDIT_COVER_PHOTO"},data:i}))+'" data-action="pick" data-track="headerEditCoverPhotoClick"></div>\n'},5:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'			<div class="cover-photo-attribution"><a href="/photos/'+u(o((s=(s=(s=t!=null?t.coverPhoto:t)!=null?s.attribution:s)!=null?s.owner:s)!=null?s.nsid:s,t))+"/"+u(o((s=(s=t!=null?t.coverPhoto:t)!=null?s.attribution:s)!=null?s.id:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{username:(s=(s=(s=t!=null?t.coverPhoto:t)!=null?s.attribution:s)!=null?s.owner:s)!=null?s.characterName:s,intlName:"groups.GROUPS_COVER_ATTRIBUTION"},data:i}))+" </a></div>\n"},7:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{};return'			<div class="avatar no-menu '+u(o((s=t!=null?t.avatar:t)!=null?s.type:s,t))+" large "+((s=n.unless.call(a,(s=t!=null?t.avatar:t)!=null?s.canEdit:s,{name:"unless",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" style="background-image: url('+u(o((s=(s=t!=null?t.avatar:t)!=null?s.icon:s)!=null?s.retina:s,t))+');">\n'+((s=n["if"].call(a,(s=t!=null?t.avatar:t)!=null?s.canEdit:s,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'				<div class="loading-overlay">\n					<div class="balls"></div>\n				</div>\n			</div>\n'},8:function(e,t,n,r,i){return"no-edit"},10:function(e,t,n,r,i){return'					<div class="edit" data-action="editAvatar" data-track="headerBuddyIconClick">\n						<span class="edit-icon"></span>\n					</div>\n'},12:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'			<div class="avatar no-menu '+u(o((s=t!=null?t.avatar:t)!=null?s.type:s,t))+' large" style="background-image: url('+u(o((s=(s=t!=null?t.avatar:t)!=null?s.icon:s)!=null?s.lowres:s,t))+');">\n'+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.avatar:t)!=null?s.canEdit:s,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+'				<div class="loading-overlay">\n					<div class="balls"></div>\n				</div>\n			</div>\n'},14:function(e,t,n,r,i){var s,o=t!=null?t:{};return'				<div class="title '+((s=n["if"].call(o,(s=t!=null?t.titleBlock:t)!=null?s.titleLink:s,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=n["if"].call(o,(s=t!=null?t.titleBlock:t)!=null?s.titleLink:s,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.program(22,i,0),data:i}))!=null?s:"")+"					"+((s=n["if"].call(o,(s=t!=null?t.titleBlock:t)!=null?s.follow:s,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n					"+((s=n["if"].call(o,t!=null?t["follow-view"]:t,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(o,(s=t!=null?t.titleBlock:t)!=null?s.sendFlickrMailUrl:s,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</div>\n\n"+((s=n["if"].call(o,(s=t!=null?t.titleBlock:t)!=null?s.isPro:s,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.titleBlock:t)!=null?s.subtitle:s,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},15:function(e,t,n,r,i){return"title-link-included"},17:function(e,t,n,r,i){var s;return'						<h1 class="truncate">\n							<a class="unfluid" href="'+e.escapeExpression(e.lambda((s=t!=null?t.titleBlock:t)!=null?s.titleLink:s,t))+'">\n'+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.titleBlock:t)!=null?s.isGroup:s,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+"							</a>\n						</h1>\n"},18:function(e,t,n,r,i){var s;return"									"+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(t!=null?t:{},(s=t!=null?t.titleBlock:t)!=null?s.title:s,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n"},20:function(e,t,n,r,i){var s;return"									"+e.escapeExpression(e.lambda((s=t!=null?t.titleBlock:t)!=null?s.title:s,t))+"\n"},22:function(e,t,n,r,i){var s;return'						<h1 class="truncate">\n'+((s=n["if"].call(t!=null?t:{},(s=t!=null?t.titleBlock:t)!=null?s.isGroup:s,{name:"if",hash:{},fn:e.program(23,i,0),inverse:e.program(25,i,0),data:i}))!=null?s:"")+"						</h1>\n"},23:function(e,t,n,r,i){var s;return"								"+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(t!=null?t:{},(s=t!=null?t.titleBlock:t)!=null?s.title:s,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n"},25:function(e,t,n,r,i){var s;return"								"+e.escapeExpression(e.lambda((s=t!=null?t.titleBlock:t)!=null?s.title:s,t))+"\n"},27:function(e,t,n,r,i){var s;return e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},(s=t!=null?t.titleBlock:t)!=null?s.follow:s,{name:"outlet",hash:{},data:i}))},29:function(e,t,n,r,i){return e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["follow-view"]:t,{name:"outlet",hash:{},data:i}))},31:function(e,t,n,r,i){var s;return'						<a href="'+e.escapeExpression(e.lambda((s=t!=null?t.titleBlock:t)!=null?s.sendFlickrMailUrl:s,t))+'" class="butt send-flickr-mail"><svg class="icon icon-envelope"><use xlink:href="#icon-envelope"></use></svg></a>\n\n'+((s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"flickr-chat",{name:"isFlipped",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")},32:function(e,t,n,r,i){return"							"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["flickr-chat-view"]:t,{name:"outlet"
,hash:{},data:i}))+"\n"},34:function(e,t,n,r,i){return'					<a href="/account/upgrade/pro" class="pro-badge-inline dark">PRO</a>\n'},36:function(e,t,n,r,i){var s;return'					<p class="subtitle truncate">'+e.escapeExpression(e.lambda((s=t!=null?t.titleBlock:t)!=null?s.subtitle:s,t))+"</p>\n"},38:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.contacts:t,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.groupsStats:t,{name:"if",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))!=null?s:"")},39:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.viewingSelf:t,{name:"if",hash:{},fn:e.program(40,i,0),inverse:e.program(42,i,0),data:i}))!=null?s:""},40:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'						<p class="followers truncate"><a href="'+f((s=(s=n.followerUrl||(t!=null?t.followerUrl:t))!=null?s:u,typeof s===a?s.call(o,{name:"followerUrl",hash:{},data:i}):s))+'">'+f((s=(s=n.followerString||(t!=null?t.followerString:t))!=null?s:u,typeof s===a?s.call(o,{name:"followerString",hash:{},data:i}):s))+'</a><em>&bull;</em><a href="'+f((s=(s=n.followingUrl||(t!=null?t.followingUrl:t))!=null?s:u,typeof s===a?s.call(o,{name:"followingUrl",hash:{},data:i}):s))+'">'+f((s=(s=n.followingString||(t!=null?t.followingString:t))!=null?s:u,typeof s===a?s.call(o,{name:"followingString",hash:{},data:i}):s))+"</a></p>\n"},42:function(e,t,n,r,i){var s;return(s=(n.ifCond||t&&t.ifCond||n.helperMissing).call(t!=null?t:{},t!=null?t.followingCount:t,">",0,{name:"ifCond",hash:{},fn:e.program(43,i,0),inverse:e.program(45,i,0),data:i}))!=null?s:""},43:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'							<p class="followers truncate">'+f((s=(s=n.followerString||(t!=null?t.followerString:t))!=null?s:u,typeof s===a?s.call(o,{name:"followerString",hash:{},data:i}):s))+'<em>&bull;</em><a href="'+f((s=(s=n.followingUrl||(t!=null?t.followingUrl:t))!=null?s:u,typeof s===a?s.call(o,{name:"followingUrl",hash:{},data:i}):s))+'">'+f((s=(s=n.followingString||(t!=null?t.followingString:t))!=null?s:u,typeof s===a?s.call(o,{name:"followingString",hash:{},data:i}):s))+"</a></p>\n"},45:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'							<p class="followers truncate">'+f((s=(s=n.followerString||(t!=null?t.followerString:t))!=null?s:u,typeof s===a?s.call(o,{name:"followerString",hash:{},data:i}):s))+"<em>&bull;</em>"+f((s=(s=n.followingString||(t!=null?t.followingString:t))!=null?s:u,typeof s===a?s.call(o,{name:"followingString",hash:{},data:i}):s))+"</p>\n"},47:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'					<div class="group-statistics">\n						<p class="followers truncate"><a href="'+f((s=(s=n.membersLink||(t!=null?t.membersLink:t))!=null?s:u,typeof s===a?s.call(o,{name:"membersLink",hash:{},data:i}):s))+'">'+f((s=(s=n.members||(t!=null?t.members:t))!=null?s:u,typeof s===a?s.call(o,{name:"members",hash:{},data:i}):s))+" "+f((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"header.MEMBERS"},data:i}))+'</a><em>&bull;</em></p>\n						<p class="followers truncate"><a href="'+f((s=(s=n.poolLink||(t!=null?t.poolLink:t))!=null?s:u,typeof s===a?s.call(o,{name:"poolLink",hash:{},data:i}):s))+'">'+f((s=(s=n.photosText||(t!=null?t.photosText:t))!=null?s:u,typeof s===a?s.call(o,{name:"photosText",hash:{},data:i}):s))+'</a><em>&bull;</em></p>\n						<p class="followers truncate"><a href="'+f((s=(s=n.discussionsLink||(t!=null?t.discussionsLink:t))!=null?s:u,typeof s===a?s.call(o,{name:"discussionsLink",hash:{},data:i}):s))+'"> '+f((s=(s=n.topicCount||(t!=null?t.topicCount:t))!=null?s:u,typeof s===a?s.call(o,{name:"topicCount",hash:{},data:i}):s))+" "+f((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"header.DISCUSSIONS"},data:i}))+"</a></p>\n					</div>\n"},49:function(e,t,n,r,i){var s,o=t!=null?t:{};return"				"+((s=n["if"].call(o,t!=null?t.hasLocation:t,{name:"if",hash:{},fn:e.program(50,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				"+((s=n["if"].call(o,t!=null?t.photos:t,{name:"if",hash:{},fn:e.program(52,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				"+((s=n["if"].call(o,t!=null?t.memberSince:t,{name:"if",hash:{},fn:e.program(54,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n				"+((s=n["if"].call(o,t!=null?t.groupSince:t,{name:"if",hash:{},fn:e.program(56,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},50:function(e,t,n,r,i){var s;return'<p class="truncate cp-location">'+e.escapeExpression((s=(s=n.location||(t!=null?t.location:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"location",hash:{},data:i}):s))+"</p>"},52:function(e,t,n,r,i){return'<p class="photo-count">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{count:t!=null?t.count:t,intlName:"header.COUNT_PHOTOS"},data:i}))+"</p>"},54:function(e,t,n,r,i){return"<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{year:t!=null?t.date:t,intlName:"header.JOINED_YEAR"},data:i}))+"</p>"},56:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"<p>"+a((s=(s=n.count||(t!=null?t.count:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"count",hash:{},data:i}):s))+" "+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"header.GROUP_SINCE"},data:i}))+" "+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{mdyDate:t!=null?t.date:t,intlName:"header.MDY_DATE"},data:i}))+"</p>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<div class="coverphoto" '+((s=n["if"].call(o,t!=null?t.coverPhoto:t,{name:"if",hash:{},fn:e.program
(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n	<div class="editor-controls">\n		<button data-action="saveEdit" class="butt">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.SAVE"},data:i}))+'</button>\n		<button data-action="cancelEdit" class="butt alt">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:i}))+"</button>\n		<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"header.COVER_PHOTO_SET_POSITION"},data:i}))+'</p>\n	</div>\n	<div class="balls"></div>\n	<div class="coverphoto-gradient">\n	</div>\n	<div class="coverphoto-content fluid-centered">\n'+((s=n["if"].call(o,(s=t!=null?t.coverPhoto:t)!=null?s.canEdit:s,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,(s=(s=t!=null?t.coverPhoto:t)!=null?s.attribution:s)!=null?s.id:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=(s=t!=null?t.avatar:t)!=null?s.icon:s)!=null?s.retina:s,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(12,i,0),data:i}))!=null?s:"")+'		<div class="title-block-content">\n'+((s=n["if"].call(o,t!=null?t.titleBlock:t,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n.each.call(o,t!=null?t.metadata:t,{name:"each",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		</div>\n\n		<div class="metadata-content">\n'+((s=n.each.call(o,t!=null?t.metadata:t,{name:"each",hash:{},fn:e.program(49,i,0),inverse:e.noop,data:i}))!=null?s:"")+"		</div>\n	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-coverphoto",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-follow",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showNoButton:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i}))!=null?s:""},2:function(e,t,n,r,i){return""},4:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showUnblockButton:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:""},5:function(e,t,n,r,i){return"			<button class='follow alt'>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.UNBLOCK"},data:i}))+"</button>\n"},7:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showFollowingButton:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))!=null?s:""},8:function(e,t,n,r,i){return'				<button class="follow is-following mini"><span class="drop-icon">\u25be</span></button>\n'},10:function(e,t,n,r,i){return'				<button class="follow mini"></button>\n'},12:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isFluid:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.program(23,i,0),data:i}))!=null?s:""},13:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showNoButton:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(14,i,0),data:i}))!=null?s:""},14:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showUnblockButton:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.program(17,i,0),data:i}))!=null?s:""},15:function(e,t,n,r,i){return"				<button class='follow alt'>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.UNBLOCK"},data:i}))+"</button>\n"},17:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showFollowingButton:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.program(21,i,0),data:i}))!=null?s:""},18:function(e,t,n,r,i){var s,o=t!=null?t:{};return'					<button class="follow is-following '+((s=n["if"].call(o,t!=null?t.isOnDark:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:t!=null?t.followingIntlKey:t},data:i}))+'<span class="drop-icon">\u25be</span></button>\n'},19:function(e,t,n,r,i){return"white"},21:function(e,t,n,r,i){var s,o=t!=null?t:{};return'					<button class="follow '+((s=n["if"].call(o,t!=null?t.isOnDark:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:t!=null?t.followIntlKey:t},data:i}))+"</button>\n"},23:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showNoButton:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(24,i,0),data:i}))!=null?s:""},24:function(e,t,n,r,i){var s;return'			<span class="relationship">\n'+((s=n["if"].call(t!=null?t:{},t!=null?t.showUnblockButton:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(25,i,0),data:i}))!=null?s:"")+"			</span>\n"},25:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.showFollowingButton:t,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.program(28,i,0),data:i}))!=null?s:""},26:function(e,t,n,r,i){return"						<button class='unfluid follow is-following ui-button ui-button-icon ui-button-transparent ui-button-dropdown'><span>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.FOLLOWING"},data:i}))+"</span></button>\n"},28:function(e,t,n,r,i){return"						<button class='unfluid follow ui-button ui-button-icon'><span>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.FOLLOW"},data:i}))+"</span></button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isOnMobile:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(12,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/follow",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-following-dropdown",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'			<label class = "checked">\n				<input type="checkbox" checked="checked" id="friend-checkbox" />\n'},3:function(e,t,n,r,i){return'			<label>\n				<input type="checkbox" id="friend-checkbox" />\n'},5:function(e,t,n,r,i){return'			<label class="checked">\n				<input type="checkbox" checked="checked" id="family-checkbox" />\n'},7:function(e,t,n,r,i){return'			<label>\n				<input type="checkbox" id="family-checkbox" />\n'},9:function(e,t,n,r,i){return'			<button class="follow unfollow">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.UNFOLLOW"},data:i}))+"</button>\n"},11:function(e,t,n,r,i){return'			<a href="#"><i class="ui-icon-tiny-unfollow"></i> '+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.UNFOLLOW"},data:i}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'<ul>\n	<li class="following-friend">\n'+((s=n["if"].call(o,t!=null?t.isFriend:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"			"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FRIEND"},data:i}))+'\n		</label>\n	</li>\n	<li class="following-family">\n'+((s=n["if"].call(o,t!=null?t.isFamily:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+"			"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAMILY"},data:i}))+'\n		</label>\n	</li>\n	<li class="divider"></li>\n	<li class="following-unfollow">\n'+((s=n["if"].call(o,t!=null?t.isFluid:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.program(11,i,0),data:i}))!=null?s:"")+"	</li>\n</ul>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/following-dropdown",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("relationship-menu-view",function(e,t){var n=require("lib/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.disableRefreshOnRelationshipChange=e.disableRefreshOnRelationshipChange,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this,t=e.nsid||{pathAlias:e.pathAlias};return e.appContext.getModel("person-relationship-models",t).then(function(t){e.relationship=t,e.nsid=e.nsid||t.id})},buildContainer:function(){return this.setContainerWithTemplate("following-dropdown",{isFriend:this.relationship.getValue("isFriend"),isFamily:this.relationship.getValue("isFamily"),isFluid:!0}),this},activate:function(){var e=this.get("container"),t=this;return this.relationship&&this.registerEventHandler(this.relationship.on("valuesChanged",function(){t.buildContainer()})),this.registerEventHandler(e.delegate("click",function(e){t.handleUnfollowClick(e)},".following-unfollow")),this.registerEventHandler(e.delegate("change",function(e){t.handleFriendChange(e)},".following-friend input")),this.registerEventHandler(e.delegate("change",function(e){t.handleFamilyChange(e)},".following-family input")),this},handleUnfollowClick:function(t){var r=this;t.preventDefault(),this.relationship.getValue("isContact")&&(this.relationship.registry.toggleFollowing(this.nsid),this.relationship.registry.remoteUpdate(this.nsid).then(function(){r.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){r.relationship.setValue("isContact",!0),r.buildContainer(),n.error({err:e})}),e.rapidTracker.beacon(this.name,"unfollowButtonClick"),this.fire("onUnfollow"))},handleFriendChange:function(t){var r=this;this.relationship.registry.toggleFriend(this.nsid),this.relationship.registry.remoteUpdate(this.nsid).then(function(){r.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){r.relationship.registry.toggleFriend(r.nsid),r.buildContainer(),r.onError(r.intlMessage({intlName:"person.RELATIONSHIP_FRIEND_ERROR"})),n.error({err:e})})},handleFamilyChange:function(t){var r=this;this.relationship.registry.toggleFamily(this.nsid),this.relationship.registry.remoteUpdate(this.nsid).then(function(){r.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){r.relationship.registry.toggleFamily(r.nsid),r.buildContainer(),r.onError(r.intlMessage({intlName:"person.RELATIONSHIP_FAMILY_ERROR"})),n.error({err:e})})}})},"@VERSION@",{requires:["promise","hermes-template-following-dropdown"],langBundles:["common","person"]});
YUI.add("follow-view",function(e,t){var n=require("lib/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.set("isActiveViewAgnostic",e.isActiveViewAgnostic),this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.realFullscreen=!!e.realFullscreen,this.isFluid=e.isFluid,this.isOnDark=e.isOnDark,this.disableRefreshOnRelationshipChange=e.disableRefreshOnRelationshipChange,this.isOnMobile=e.isOnMobile,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.appContext.flipper.isFlipped("enable-signed-out-cta-test")&&(this.signedOutTest=!0),this},loadState:function(){var e=this,t=e.nsid||{pathAlias:e.pathAlias};return e.appContext.getModel("person-relationship-models",t).then(function(t){e.set("relationship",t),e.nsid=e.nsid||t.id})},buildContainer:function(){var e=this.get("relationship");return this.setContainerWithTemplate("follow",{showNoButton:e.getValue("isMe")||e.getValue("isIgnoredBy"),showUnblockButton:e.getValue("isIgnored"),showFollowingButton:e.getValue("isContact"),signedIn:this.appContext.getViewer().signedIn,isFluid:this.isFluid,isOnMobile:this.isOnMobile,isOnDark:this.isOnDark,followIntlKey:"common.FOLLOW",followingIntlKey:"common.FOLLOWING"}),this},activate:function(){var t=this,r=this.get("container"),i=this.get("relationship"),s,o;return this.isFluid&&!i.getValue("isMe")?this.registerEventHandler(r.delegate("click",function(r){e.rapidTracker.beacon(this.name,"followButtonClick"),s=r.target.hasClass("follow")?r.target:r.target.ancestor(".follow"),t.appContext.getViewer().signedIn?i.getValue("isIgnored")?(i.registry.toggleIgnore(t.nsid),t.disableRefreshOnRelationshipChange?t.buildContainer():t.showBalls(),i.registry.remoteUpdate(t.nsid).then(function(){t.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){i.setValue("isIgnored",!0),t.buildContainer(),n.error({err:e})})):i.getValue("isContact")?(s.addClass("is-open"),o&&o.destroy(),o=new e.Views.FluidDroparound({appContext:t.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:140,height:130,observePageResize:!0,anchorOffsetHorizontal:6,anchorElement:s.one(".drop-icon"),subview:new e.Views["relationship-menu-view"]({nsid:t.nsid,pathAlias:t.pathAlias,disableRefreshOnRelationshipChange:t.disableRefreshOnRelationshipChange}),preferLeft:!0}),o.on("closeDroparound",function(){s.removeClass("is-open"),t.fire("subviewViewEvent","isClosed")}),o.show(),t.fire("subviewViewEvent","isOpen"),o.get("subview").on("onUnfollow",function(){o.close(),o.destroy(),t.disableRefreshOnRelationshipChange?t.buildContainer():t.showBalls()})):t.followPerson():t.signInAndRedirectToPerson()},"button.follow")):(r&&r.one("button")&&this.registerEventHandler(r.one("button").on("click",t.handleRelationshipClick,t)),this.get("relationship").getValue("isMe")||this.setupDropdown()),t},followPerson:function(){var t=this,r=this.get("relationship");r.getValue("isContact")||(r.registry.toggleFollowing(this.nsid),t.disableRefreshOnRelationshipChange?this.buildContainer():this.showBalls(),r.registry.remoteUpdate(this.nsid).then(function(){t.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){t.hideBalls(),r.setValue("isContact",!1),t.buildContainer(),n.error({err:e})}))},showBalls:function(){this.balls||(this.balls=e.Node.create(this.templates("flickr-balls")({}))),this.get("container").append(this.balls),this.balls.show(),this.get("container").one(".follow").hide()},hideBalls:function(){this.balls&&(this.balls.remove(),this.get("container").one(".follow").show())},handleRelationshipClick:function(t){var n=this;t.preventDefault(),e.rapidTracker.beacon(this.name,"followButtonClick");var r=this.get("relationship").getValue("isContact");this.appContext.getViewer().signedIn?r===!1?(this.followPerson(),e.rapidTracker.beacon(this.name,"photoAttributionFollowButtonClick")):n.isOnMobile?n.handleUnfollowClick(t):(n.relationshipDropDownDialog.toggle(),e.rapidTracker.beacon(this.name,"photoAttributionFollowMenuClick")):n.isOnMobile?e.use("mobile-actions-helper",function(e){e.MobileActionsHelper.redirectToAppOrStore({os:n.appContext.getUA().os,isWebview:n.appContext.getUA().isWebview,pageURL:"/photos/"+n.nsid,beacon:{name:"mpp_follow_signedout",section:"attribution-view"},viewName:n.name})}):n.signInAndRedirectToPerson()},handleFriendChange:function(t){var r=this;this.get("relationship").registry.toggleFriend(this.nsid),r.disableRefreshOnRelationshipChange||this.showBalls(),this.get("relationship").registry.remoteUpdate(this.nsid).then(function(){r.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){this.hideBalls(),this.get("relationship").registry.toggleFriend(this.nsid),t.target.set("checked",!t.target.get("checked")),this.onError(this.intlMessage({intlName:"person.RELATIONSHIP_FRIEND_ERROR"})),n.error({err:e})}.bind(this)),t.target.get("checked")?t.target.ancestor().addClass("checked"):t.target.ancestor().removeClass("checked")},handleFamilyChange:function(t){var r=this;this.get("relationship").registry.toggleFamily(this.nsid),r.disableRefreshOnRelationshipChange||this.showBalls(),this.get("relationship").registry.remoteUpdate(this.nsid).then(function(){r.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){this.hideBalls(),this.get("relationship").registry.toggleFamily(this.nsid),t.target.set("checked",!t.target.get("checked")),this.onError(this.intlMessage({intlName:"person.RELATIONSHIP_FAMILY_ERROR"})),n.error({err:e})}.bind(this)),t.target.get("checked")?t.target.ancestor().addClass("checked"):t.target.ancestor().removeClass("checked")},handleUnfollowClick:function(t){var r=this;t.preventDefault(),this.get("relationship").registry.toggleFollowing(this.nsid),r.disableRefreshOnRelationshipChange||this.showBalls(),this.isOnMobile||this.relationshipDropDownDialog.toggle(function(){this.toggleFollowingButton(t.target
.ancestor(".relationship").one("button"),this.get("relationship").getValue("isContact"))}.bind(this)),this.get("relationship").registry.remoteUpdate(this.nsid).then(function(){r.disableRefreshOnRelationshipChange||(e.config.win.location=e.config.win.location)},function(e){this.hideBalls(),this.get("relationship").setValue("isContact",!0),this.toggleFollowingButton(t.target.ancestor("button"),!0),n.error({err:e})}.bind(this)),e.rapidTracker.beacon(this.name,"photoAttributionUnfollowButtonClick")},toggleFollowingButton:function(e,t){t?(e.setContent("<span>"+this.intlMessage({intlName:"common.FOLLOWING"})+"</span>"),e.addClass("follow-anim").addClass("is-following"),setTimeout(function(){e.removeClass("follow-anim")},500),e.addClass("ui-button-dropdown")):(e.addClass("unfollow-anim").removeClass("is-following"),setTimeout(function(){e.removeClass("unfollow-anim")},500),e.one("span").setContent(this.intlMessage({intlName:"common.FOLLOW"})),e.removeClass("ui-button-dropdown"))},onError:function(t){var n=new e.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"common.ERROR"}),message:t,actionButtonLabel:this.intlMessage({intlName:"common.OK"}),showCancelButton:!1});n.show()},setupDropdown:function(){var t=this,n=this.get("container"),r,i=n.one(".relationship"),s,o=n.one(".relationship button");if(!i)return;s=this.templates("following-dropdown")({isFriend:this.get("relationship").getValue("isFriend"),isFamily:this.get("relationship").getValue("isFamily")}),e.use("dialog",function(){t.relationshipDropDownDialog=e.Views.dialog.getNewInstance("dialog-tooltip",{content:s,anchorTo:n.one(".relationship"),positioning:!1,parent:t}),t.registerEventHandler(t.relationshipDropDownDialog.on("hide",function(e){o.removeClass("is-open")})),t.registerEventHandler(t.relationshipDropDownDialog.on("show",function(e){o.addClass("is-open")})),t.relationshipDropDownDialog.render(),r=t.relationshipDropDownDialog.get("container"),r.detach("click"),t.registerEventHandler(r.one(".following-unfollow").on("click",t.handleUnfollowClick,t)),t.registerEventHandler(r.one(".following-friend input").on("change",t.handleFriendChange,t)),t.registerEventHandler(r.one(".following-family input").on("change",t.handleFamilyChange,t))})},showSignUpModal:function(){var t=this;this.appContext.getModel("person-models",this.nsid).then(function(n){var r=t.pathAlias?e.url("/photos/")+t.pathAlias:e.url("/photos/")+t.nsid,i=t.intlMessage({intlName:"person.JOIN_FLICKR_AND_FOLLOW",person:n.getValue("displayname")}),s=n.getValue("buddyicon"),o;s.displayUrl=s.retina||s.large||s.medium||s.default,o=new e.Views.SignUpModal({appContext:t.appContext,signUpHeaderClass:"avatar person large no-menu no-edit",signUpHeaderImage:s.displayUrl,signUpTitle:t.intlMessage({intlName:"person.SIGN_IN_BEFORE_FOLLOW_TITLE"}),signUpMessage:i,beaconPrefix:"follow"}),o.on("signUpClick",function(n){e.SigninHelper.signUpPendingFollow({id:t.nsid},{postLoginUrl:r})}),o.on("signInClick",function(n){e.SigninHelper.addPendingFollow({id:t.nsid},{postLoginUrl:r})}),o.show()})},signInAndRedirectToPerson:function(){var t=this,n=t.pathAlias?e.url("/photos/")+t.pathAlias:e.url("/photos/")+t.nsid,r=t.intlMessage({intlName:"person.SIGN_IN_BEFORE_FOLLOW_MESSAGE"}),i=t.intlMessage({intlName:"person.SIGN_IN_AND_FOLLOW"}),s=t.intlMessage({intlName:"common.CANCEL"}),o;if(this.signedOutTest)return this.showSignUpModal();o=new e.Views.FluidModal({appContext:t.appContext,title:t.intlMessage({intlName:"person.SIGN_IN_BEFORE_FOLLOW_TITLE"}),htmlMessage:r,actionButtonLabel:i,cancelButtonLabel:s}),o.on("actionClick",function(){e.rapidTracker.beacon(t.name,"followModalSigninClick"),e.SigninHelper.addPendingFollow({id:t.nsid},{postLoginUrl:n})}),o.on("cancelClick",function(n){e.rapidTracker.beacon(t.name,"followModalCancelClick")}),o.show()}})},"@VERSION@",{requires:["flickr-view","hermes-template-follow","promise","fluid-droparound-view","fluid-modal-view","signup-modal-view","hermes-template-following-dropdown","hermes-template-flickr-balls","relationship-menu-view","signin-helper"],optional:["person-models","person-relationship-models"],langBundles:["common","person"]});
YUI.add("hermes-template-fluid-avatar-editor",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div class="avatar-editor-container" style="height:'+e.escapeExpression((s=(s=n.contentHeight||(t!=null?t.contentHeight:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"contentHeight",hash:{},data:i}):s))+'px">\n	<div class="avatar-clip">\n		<div class="avatar-image"></div>\n	</div>\n\n	<div class="controls-area">\n		<div class="zoom-controls">\n			<p class="zoom-minus"></p>\n			<p class="zoom-plus"></p>\n\n			<div class="zoom-handle"></div>\n\n			<div class="zoom-guide"><span class="low-quality-zone"></span></div>\n		</div>\n	</div>\n\n	<div class="avatar-background">\n	</div>\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-avatar-editor",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-avatar-editor-view",function(e){"use strict";var t={dragging:{mouseDownX:0,mouseDownY:0,previousX:0,previousY:0,centerX:0,centerY:0,startDrag:!1,overlayDiameter:0},zoom:{scale:1,scaleFactor:1,mouseDownX:0,previousX:0,startDrag:!1,midpoint:0,height:0,width:0,max:0,min:0,isLowQuality:!1},potential:{height:0,width:0,url:"",x:0,y:0},original:{x:0,y:0}},n=10,r=.25;e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.set("photoModel",e.photoModel),this.contentHeight=e.contentHeight,t.zoom.scale=1,t.dragging.startDrag=!1,t.zoom.startDrag=!1,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(e){return this.setContainerWithTemplate("fluid-avatar-editor",{contentHeight:this.contentHeight}),this},activate:function(){return this.avatarBackground=this.get("container").one(".avatar-background"),this.avatarFocus=this.get("container").one(".avatar-image"),this.zoomHandle=this.get("container").one(".zoom-handle"),this.containerWidth=this.get("container").get("offsetWidth"),this.containerHeight=this.get("container").get("offsetHeight"),this.loadAvatarPhoto(),this},showTooltip:function(){this.zoomTooltip||(this.zoomTooltip=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!1,dismissOnActionClick:!1,showDropArrow:!0,width:150,anchorElement:this.zoomHandle,textMessage:this.intlMessage({intlName:"header.MIN_ZOOM"}),invisibleOverlay:!0,anchorOffsetHorizontal:11,classList:"over-modal",overlayClassList:"over-modal"})),this.zoomTooltip.show()},hideTooltip:function(){this.zoomTooltip&&!this.zoomTooltip.isClosed&&this.zoomTooltip.close()},loadAvatarPhoto:function(){var e=new Image,n;e.onload=this.handleImageLoad.bind(this),n=this.get("photoModel").getLargestSize(),t.potential.width=n.width,t.potential.height=n.height,t.potential.url=n.url,t.zoom.width=n.width*t.zoom.scale,t.zoom.height=n.height*t.zoom.scale,e.src=n.url,(e.complete||e.onloadFired)&&this.handleImageLoad()},handleImageLoad:function(){var e=this.get("container"),n=e.one(".avatar-clip");t.dragging.centerX=(t.potential.width/2-this.containerWidth/2)*-1,t.dragging.centerY=(t.potential.height/2-this.containerHeight/2)*-1,t.dragging.overlayDiameter=parseInt(n.getStyle("width"),10)/2,this.offsetLeft=this.containerWidth/2-t.dragging.overlayDiameter,this.offsetTop=this.containerHeight/2-t.dragging.overlayDiameter,t.potential.x=t.dragging.centerX,t.potential.y=t.dragging.centerY,t.original.x=t.dragging.centerX,t.original.y=t.dragging.centerY,this.saveParamsForAPI(),e.one(".avatar-image").setStyles({backgroundImage:"url("+t.potential.url+")",width:t.potential.width+"px",height:t.potential.height+"px",left:t.dragging.centerX+this.offsetLeft*-1+"px",top:t.dragging.centerY+this.offsetTop*-1+"px"}),e.one(".avatar-background").setStyles({backgroundImage:"url("+t.potential.url+")",width:t.potential.width+"px",height:t.potential.height+"px",left:t.dragging.centerX+"px",top:t.dragging.centerY+"px"}),this.setupEventListeners(),this.setupZoomHandler()},setupEventListeners:function(){var n=this.get("container"),r=n.one(".avatar-background"),i=n.one(".avatar-image"),s=n.one(".controls-area"),o=this;this.registerEventHandler(r.on("mousedown",function(e){e.halt(),t.dragging.mouseDownY=e.pageY,t.dragging.mouseDownX=e.pageX,t.dragging.previousY=parseInt(r.getStyle("top"),10),t.dragging.previousX=parseInt(r.getStyle("left"),10),t.dragging.startDrag=!0,r.addClass("grabbing"),s.addClass("clickthrough")})),this.registerEventHandler(r.on("mousemove",function(e){e.halt();if(!t.dragging.startDrag)return;var n=t.dragging.mouseDownY-e.pageY,s=t.dragging.mouseDownX-e.pageX,u=t.dragging.previousY-n,a=t.dragging.previousX-s,f=o.snapFocusToFit(a,u);a=f.x,u=f.y,t.potential.x=a,t.potential.y=u,t.original.x=(o.containerWidth-o.containerWidth/t.zoom.scale)/2+t.potential.x/t.zoom.scale,t.original.y=(o.containerHeight-o.containerHeight/t.zoom.scale)/2+t.potential.y/t.zoom.scale,o.saveParamsForAPI(),r.setStyle("left",a),r.setStyle("top",u),i.setStyle("left",a+o.offsetLeft*-1),i.setStyle("top",u+o.offsetTop*-1)})),this.registerEventHandler(e.one("body").on("mouseup",function(){t.dragging.startDrag=!1,r.removeClass("grabbing"),s.removeClass("clickthrough")})),this.registerEventHandler(r.on("mouseup",function(){t.dragging.startDrag=!1,r.removeClass("grabbing"),s.removeClass("clickthrough")}))},determineBoundaries:function(){return{minX:t.dragging.centerX+t.zoom.width/2-t.dragging.overlayDiameter,minY:t.dragging.centerY+t.zoom.height/2-t.dragging.overlayDiameter,maxX:t.dragging.centerX-t.zoom.width/2+t.dragging.overlayDiameter,maxY:t.dragging.centerY-t.zoom.height/2+t.dragging.overlayDiameter}},snapFocusToFit:function(e,t){var n=this.determineBoundaries();return e=e<=n.minX?e:n.minX,e=e>=n.maxX?e:n.maxX,t=t<=n.minY?t:n.minY,t=t>=n.maxY?t:n.maxY,{x:e,y:t}},setupZoomHandler:function(){var n=this,i=this.get("container"),s=i.one(".controls-area"),o=i.one(".zoom-controls"),u=i.one(".zoom-plus"),a=i.one(".zoom-minus"),f;t.zoom.max=parseInt(o.get("offsetWidth"),10)-parseInt(this.zoomHandle.get("offsetWidth"),10),t.zoom.previousX=parseInt(this.zoomHandle.getStyle("left"),10),t.zoom.scaleFactor=1/(t.zoom.max/4),t.zoom.midpoint=t.zoom.max/2,f=Math.max(t.dragging.overlayDiameter*2/t.potential.width,t.dragging.overlayDiameter*2/t.potential.height),t.zoom.min=(f-r)*2/t.zoom.scaleFactor,t.zoom.min>t.zoom.max&&(t.zoom.isLowQuality=!0,this.zoomHandle.setStyle("left",t.zoom.max)),i.one(".low-quality-zone").setStyle("width",Math.min(t.zoom.min,t.zoom.max)),t.zoom.scale=Math.max(t.zoom.min,t.zoom.midpoint)*t.zoom.scaleFactor/2+r,this.updateImageScale(),this.registerEventHandler(this.zoomHandle.on("mousedown",this.onZoomBarClicked.bind(this))),this.registerEventHandler(s.on("mousemove",this.onZoomBarMoved.bind(this))),this.registerEventHandler(u.on("click",this.zoomByIncrement.bind(this))),this.registerEventHandler(a.on("click",this.zoomByIncrement.bind(this))),this.registerEventHandler
(i.on("mouseup",function(e){e.halt(),t.zoom.startDrag=!1,n.zoomHandle.removeClass("dragging")})),this.registerEventHandler(e.one("body").on("mouseup",function(e){e.halt(),t.zoom.startDrag=!1,n.zoomHandle.removeClass("dragging")}))},onZoomBarClicked:function(e){e.halt(),t.zoom.mouseDownX=e.pageX,t.zoom.startDrag=!0,t.zoom.previousX=parseInt(this.zoomHandle.getStyle("left"),10),this.zoomHandle.addClass("dragging")},onZoomBarMoved:function(e){e.halt();if(!t.zoom.startDrag)return;var n=t.zoom.mouseDownX-e.pageX,i=t.zoom.previousX-n;i=i<=t.zoom.min?t.zoom.min:i,i=i>=t.zoom.max?t.zoom.max:i,t.zoom.scale=i*t.zoom.scaleFactor/2+r;if(i<=t.zoom.min&&t.zoom.isLowQuality){this.showTooltip();return}i===t.zoom.min?this.showTooltip():this.hideTooltip(),this.zoomHandle.setStyle("left",i),this.updateImageScale()},zoomByIncrement:function(e){var i,s=parseInt(this.zoomHandle.getStyle("left"));if(!e)return;e.halt(),e.target.hasClass("zoom-plus")?i=s+parseInt(t.zoom.max/n):e.target.hasClass("zoom-minus")&&(i=s-parseInt(t.zoom.max/n)),i=i<=t.zoom.min?t.zoom.min:i,i=i>=t.zoom.max?t.zoom.max:i;if(i<=t.zoom.min&&t.zoom.isLowQuality){this.showTooltip();return}i===t.zoom.min?this.showTooltip():this.hideTooltip(),t.zoom.previousX=i,t.zoom.scale=i*t.zoom.scaleFactor/2+r,this.zoomHandle.setStyle("left",i),this.updateImageScale()},updateImageScale:function(){var e,n,r;t.zoom.width=t.potential.width*t.zoom.scale,t.zoom.height=t.potential.height*t.zoom.scale,t.dragging.centerX=(t.zoom.width/2-this.containerWidth/2)*-1,t.dragging.centerY=(t.zoom.height/2-this.containerHeight/2)*-1,e=(this.containerWidth-this.containerWidth*t.zoom.scale)/2+t.original.x*t.zoom.scale,n=(this.containerHeight-this.containerHeight*t.zoom.scale)/2+t.original.y*t.zoom.scale,r=this.snapFocusToFit(e,n),e=r.x,n=r.y,t.potential.x=e,t.potential.y=n,this.saveParamsForAPI(),this.avatarBackground.setStyles({width:t.zoom.width+"px",height:t.zoom.height+"px",left:e+"px",top:n+"px"}),this.avatarFocus.setStyles({width:t.zoom.width+"px",height:t.zoom.height+"px",left:e+this.offsetLeft*-1+"px",top:n+this.offsetTop*-1+"px"})},saveParamsForAPI:function(){var n=t.zoom.width/2-(t.potential.x-t.dragging.centerX),r=t.zoom.height/2-(t.potential.y-t.dragging.centerY);n/=t.zoom.scale,r/=t.zoom.scale,this.set("apiParams",{x1:parseInt(n-t.dragging.overlayDiameter/t.zoom.scale),x2:parseInt(n+t.dragging.overlayDiameter/t.zoom.scale),y1:parseInt(r-t.dragging.overlayDiameter/t.zoom.scale),y2:parseInt(r+t.dragging.overlayDiameter/t.zoom.scale),url:e.URLHelper.addProtocolToURL(t.potential.url)})},destructor:function(){return this.hideTooltip(),this.constructor.superclass.destroy.call(this)}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-avatar-editor","url-helper","fluid-droparound-view"],langBundles:["header"]});
YUI.add("html-file-dragdrop",function(e){"use strict";var t="htmlFileDragDrop",n=t+"-drag-over",r=t+"-error",i=["image/png","image/jpeg"];e.HtmlFileDragDrop=function(t){e.config.win.File&&e.config.win.FileList&&e.config.win.FileReader&&t.dropZone&&(this.dropZone=e.one(t.dropZone),this.dropZone.on("dragover",this.handleDragOver.bind(this)),this.dropZone.on("dragleave",this.handleDragLeave.bind(this)),this.dropZone.on("drop",this.handleDrop.bind(this)))},e.HtmlFileDragDrop.prototype.reset=function(){this.dropZone.removeClass(r),this.dropZone.removeClass(n)},e.HtmlFileDragDrop.prototype.handleDragOver=function(e){e.halt(),this.reset(),this.dropZone.addClass(n)},e.HtmlFileDragDrop.prototype.handleDragLeave=function(e){e.halt(),this.reset()},e.HtmlFileDragDrop.prototype.showError=function(){this.dropZone.addClass(r)},e.HtmlFileDragDrop.prototype.handleDrop=function(e){var t,s;e.halt(),this.dropZone.removeClass(n),t=e._event.dataTransfer.files;if(t.length>1){this.dropZone.addClass(r),this.fire("drop",new Error("FILE_COUNT"));return}s=e._event.dataTransfer.files[0];if(s&&s.name){if(i.indexOf(s.type)<0){this.fire("drop",new Error("FILE_TYPE"));return}this.fire("drop",s)}},e.augment(e.HtmlFileDragDrop,e.EventTarget,!0,null,{prefix:t})},"@VERSION@",{affinity:"",requires:["event-custom"],optional:[]});
YUI.add("hermes-template-photo-selector",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'		<div class="photo-selector-search-list-yours">\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n'},3:function(e,t,n,r,i){return'		<div class="photo-selector-search-list-contacts">\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n'},5:function(e,t,n,r,i){return'		<div class="photo-selector-search-list-everyone">\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n'},7:function(e,t,n,r,i){return'		<div class="photo-selector-search-list-marketplace"\n			<div class="photo-selector-search-list">\n				<div class="photo-selector-search-list-container">\n				</div>\n			</div>\n		</div>\n'},9:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'<div class="photo-selector-upload is-hiding">\n	<p class="upload-error"></p>\n	<div class="drop-zone">\n		<div class="drop-zone-content">\n			<div class="balls"></div>\n			<input type="file" class="file-select" name="file-select" accept="image/jpeg, image/png" />\n			<p><i class="upload-icon"></i>'+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"wallart.DRAG_DROP_TO_UPLOAD"},data:i}))+"</p>\n			<p>"+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"wallart.PHOTOS_UPLOADED_AS_PRIVATE"},data:i}))+'</p>\n		</div>\n	</div>\n	<ul class="preview"></ul>\n</div>\n'},11:function(e,t,n,r,i){return'<div class="group-photo-selector-photos-wrapper">\n	<div class="group-photo-selector-photos photo-selector-photos">\n		<div class="group-photo-selector-photos-container">\n		</div>\n	</div>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div class="photo-selector-title-bar hidden">\n	<div class="back-to-list">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"},data:i}))+'</div>\n	<div class="title"></div>\n</div>\n\n<div class="photo-selector-photos-wrapper">\n	<div class="photo-selector-photos">\n		<div class="photo-selector-photos-container">\n			<div class="loader"><div class="balls"></div></div>\n		</div>\n	</div>\n</div>\n\n\n<div class="photo-selector-search-lists-wrapper is-hiding">\n'+((s=n["if"].call(o,(s=t!=null?t.searchable:t)!=null?s.yours:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.searchable:t)!=null?s.contacts:s,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.searchable:t)!=null?s.everyone:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,(s=t!=null?t.searchable:t)!=null?s.marketplace:s,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</div>\n\n"+((s=n["if"].call(o,t!=null?t.hasUploadCapabilities:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.hasGroupCapabilities:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-selector",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
