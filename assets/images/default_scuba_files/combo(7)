YUI.add("group-pool-by-person-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.Models["group-pool-models"],{name:this.name,attributes:e.merge(e.Models["group-pool-models"].prototype.attributes,{personFilter:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:null}})})},"@VERSION@",{requires:["attribute-helpers","group-pool-models","flickr-groups-pools-getPhotos-fetcher","flickr-groups-pools-add-creator","flickr-groups-pools-remove-deletor","flickr-groups-invite-photo-invite-creator","flickr-groups-invite-photo-cancel-deletor"]});
YUI.add("group-pool-by-tag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.Models["group-pool-models"],{name:this.name,attributes:{tagFilter:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:null}}})},"@VERSION@",{requires:["attribute-helpers"]});
YUI.add("flickr-groups-pools-getPhotos-fetcher",function(e,t){"use strict";function n(t){var n={extras:e.APIHelper.request.getRebootPhotoExtras()+","+e.APIHelper.request.getRebootGroupExtras(),per_page:t.perPage||20,page:t.page||1,get_group_info:1};if(t.id)n.group_id=e.Models["group-pool-models"].extractGroupFromCompoundId(t.id);else{if(!t.pathAlias)throw new Error("[flickr-groups-pools-getPhotos-fetcher] `id` or `pathAlias` is required.");n.group_path_alias=t.pathAlias}return t.withPhotoId&&(n.jump_to=t.withPhotoId),t.privacyFilter&&(n.privacy_filter=t.privacyFilter),t.safeSearch&&(n.safe_search=t.safeSearch),t.media&&(n.media=t.media),t.personFilter&&(n.user_id=t.personFilter),t.tagFilter&&(n.tags=t.tagFilter),n}function r(t,n){var r=t.apiResponse,i=t.photoModelRegistry,s=t.personModelRegistry,o=t.groupPoolModelRegistry,u=t.groupPoolByPersonModelRegistry,a=t.groupPoolByTagModelRegistry,f=t.photoEngagementModelRegistry,l=t.photoStatsModelRegistry,c=t.groupModelRegistry,h,p,d,v;return r.group.pathAlias=r.group.pathalias===""?null:r.group.pathalias,h=c.parseGroupModel(r.group.nsid,r.group.pathAlias,r.group),c.addOrUpdate(h),p={pathAlias:r.group.pathAlias,group:c.proxy(h.id),filteredPoolCount:r.group.poolCount},d=e.APIHelper.response.parsePhotos({photos:r.photos.photo,personModelRegistry:s,photoModelRegistry:i,photoEngagementModelRegistry:f,photoStatsModelRegistry:l}),p.photoPageList={perPage:r.photos.perpage,page:r.photos.page,pageContent:d,totalItems:p.filteredPoolCount},n.personFilter?(p.id=e.Models["group-pool-models"].buildCompoundId(r.group.nsid,n.personFilter),p.personFilter=n.personFilter,p.filteredPoolCount=p.photoPageList.totalItems=r.photos.total,v=u):n.tagFilter?(p.id=e.Models["group-pool-models"].buildCompoundId(r.group.nsid,n.tagFilter),p.tagFilter=n.tagFilter,p.filteredPoolCount=p.photoPageList.totalItems=r.photos.total,v=a):(n.id&&n.id!==r.group.nsid?p.id=n.id:p.id=r.group.nsid,v=o),v.exists(p.id)?(v.setValue(p.id,"photoPageList",p.photoPageList),v.setValue(p.id,"group",p.group),v.setValue(p.id,"pathAlias",p.pathAlias),v.setValue(p.id,"filteredPoolCount",parseInt(p.filteredPoolCount,10)||0),p.group.setValue("poolCount",parseInt(r.group.poolCount,10)||0)):v.add(p),d}function i(n,r){var i=this,s=this._processParams(n),o={apiResponse:r.callAPI("flickr.groups.pools.getPhotos",s,!0),photoModelRegistry:r.getModelRegistry("photo-models"),personModelRegistry:r.getModelRegistry("person-models"),groupPoolModelRegistry:r.getModelRegistry("group-pool-models"),photoEngagementModelRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsModelRegistry:r.getModelRegistry("photo-stats-models"),groupModelRegistry:r.getModelRegistry("group-models")};return n.personFilter&&(o.groupPoolByPersonModelRegistry=r.getModelRegistry("group-pool-by-person-models")),n.tagFilter&&(o.groupPoolByTagModelRegistry=r.getModelRegistry("group-pool-by-tag-models")),(new e.FlickrPromise(o)).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-groups-pools-getPhotos"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-models","person-models","photo-engagement-models","photo-stats-models","group-models","group-pool-models","group-pool-by-person-models","group-pool-by-tag-models"]});
YUI.add("group-contributor-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{nsid:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},dateJoined:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},groupDiscussionCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},groupPhotoCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},rank:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},realname:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},username:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},latestPhotoId:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},latestPhotoTitle:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},avatarUrl:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},latestPhotoUrl:{readOnly:!0,derivedBy:["contributorUrl","latestPhotoId"],getter:function(e,t){return this.getValue(t,"latestPhotoId")?this.getValue(t,"contributorUrl")+this.getValue(t,"latestPhotoId")+"/":!1}},displayname:{readOnly:!0,derivedBy:["username"],getter:function(e,t){return this.getValue(t,"username")}},contributorUrl:{readOnly:!0,derivedBy:["id","pathAlias"],getter:function(e,t){return"/photos/"+(this.getValue(t,"pathAlias")||this.getValue(t,"nsid"))+"/"}},isPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","attribute-helpers"]});
YUI.add("flickr-groups-getTopContributors-fetcher",function(e,t){"use strict";function n(e){var t={group_id:e.id,type:"all",extras:"include_viewer,is_pro"};return t}function r(e,t){var n=e[0],r=e[1],s=e[2],o,u,a;return u={photoContributors:[],discussionContributors:[],id:t.id},n&&n.contributors&&[{k:"photos",v:"photoContributors"},{k:"discussions",v:"discussionContributors"}].forEach(function(e){n.contributors[e.k]&&(o=n.contributors[e.k],o.contributor&&o.contributor.forEach(function(n){a=i(n,t.id),u[e.v].push(s.addOrUpdate(a))}))}),n&&n.viewer&&n.viewer.length!==0?(a=i(n.viewer,t.id),u.viewer=s.addOrUpdate(a)):u.viewer=null,r.addOrUpdate(u),r.proxy(u.id)}function i(t,n){var r={id:t.id+"-"+n,nsid:t.id,dateJoined:t.dateJoined?e.moment(t.dateJoined.toString(),"X"):e.moment(),groupDiscussionCount:t.groupDiscussionCount,groupPhotoCount:t.groupPhotoCount,pathAlias:t.pathAlias,rank:t.rank,realname:t.realname,username:t.username,isPro:t.isPro,avatarUrl:e.URLHelper.getBuddyIconURL(t.id,t.iconfarm,t.iconserver)};return t.latestPhoto&&(r.latestPhotoId=t.latestPhoto.id,r.latestPhotoTitle=t.latestPhoto.name),r}function s(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.groups.getTopContributors",this._processParams(n),!0),r.getModelRegistry("group-top-contributors-models"),r.getModelRegistry("group-contributor-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-groups-getTopContributors"]={run:s,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper","moment","url-helper"],optional:["group-top-contributors-models","group-contributor-models"]});
YUI.add("group-top-contributors-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){var n=this;return e.ModelFetchers["flickr-groups-getTopContributors"].run(t,this.appContext).then(function(e){return n})}},attributes:{viewer:{isModel:!0,defaultValue:null},contributors:{isCollection:!0},photoContributors:{isCollection:!0},discussionContributors:{isCollection:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-groups-getTopContributors-fetcher","attribute-helpers"]});
YUI.add("group-pool-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-groups-pools-getPhotos"].run(t,this.appContext)},addPhoto:function(t,n){return t.registryName=this.name,e.ModelCreators["flickr-groups-pools-add"].run(t,n)},removePhoto:function(t,n){return t.registryName=this.name,e.ModelDeletors["flickr-groups-pools-remove"].run(t,n)},invitePhoto:function(t,n){return e.ModelCreators["flickr-groups-invite-photo-invite"].run(t,n)},cancelPhotoInvitation:function(t,n){return e.ModelDeletors["flickr-groups-invite-photo-cancel"].run(t,n)}},addPhotoLocal:function(e,t){return this.getValue(e,"photoPageList").unshift(t),this.getValue(e,"photoContextList").hasMaxBoundary()&&this.getValue(e,"photoContextList").appendToList(t),this},addPhotoRemote:function(e,t){return this.remote.addPhoto.call(this,{photoID:t,groupID:e},this.appContext)},removePhotoLocal:function(e,t){return this.getValue(e,"photoPageList").removeFromList(t.getValue("id")),this.getValue(e,"photoContextList").removeFromList(t.getValue("id")),this},removePhotoRemote:function(e,t){return this.remote.removePhoto.call(this,{photoID:t,groupID:e},this.appContext)},invitePhotoRemote:function(e,t){return this.remote.invitePhoto.call(this,{photoID:t,groupID:e},this.appContext)},cancelPhotoInvitationRemote:function(e,t){return this.remote.cancelPhotoInvitation.call(this,{photoID:t,groupID:e},this.appContext)},hasPhoto:function(e,t){return this.getValue(e,"photoPageList").getFromListByID(t)||this.getValue(e,"photoContextList").getFromListByID(t)},attributes:{displayType:{readOnly:!0,defaultFn:function(){return"group"}},pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultFn:function(e){return e}},photoPageList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-groups-pools-getPhotos"]}},photoContextList:{isListProxy:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-groups-pools-getContext"],listItemIdField:"photoId"}},group:{isModel:!0},urlSuffix:{readOnly:!0,derivedBy:["pathAlias"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"pool-"+t}},url:{readOnly:!0,derivedBy:["group"],defaultFn:function(e){return this.getValue(e,"group").getValue("url")}},title:{readOnly:!0,derivedBy:["group"],defaultFn:function(e){return this.getValue(e,"group").getValue("title")}},poolCount:{readOnly:!0,derivedBy:["group"],defaultFn:function(e){return this.getValue(e,"group").getValue("poolCount")}},filteredPoolCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return this.getValue(e,"group").getValue("poolCount")}},friendlyPoolCount:{readOnly:!0,derivedBy:["group"],defaultFn:function(e){return this.getValue(e,"group").getValue("friendlyPoolCount")}}}},{buildCompoundId:function(e,t){return e+"-"+t},extractGroupFromCompoundId:function(e){return e.split("-")[0]}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-groups-pools-getContext-fetcher","flickr-groups-pools-getPhotos-fetcher","flickr-groups-pools-add-creator","flickr-groups-pools-remove-deletor","flickr-groups-invite-photo-invite-creator","flickr-groups-invite-photo-cancel-deletor","attribute-helpers"],optional:["group-top-contributors-models"]});
YUI.add("flickr-groups-pools-getGroups-fetcher",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r.groups,a=n.id,f={},l=[];if(u)return u.group&&e.Array.each(u.group,function(e,t){var n,r,i;i=o.parseGroupModel(e.id,e.pathAlias,e),n=o.addOrUpdate(i),r=s.addOrUpdate({id:e.id,pathAlias:e.pathAlias,group:n}),l.push(r)}),f={id:a,memberCount:r.userGroupMemberships?r.userGroupMemberships.member:null,moderatorCount:r.userGroupMemberships?r.userGroupMemberships.moderator:null,adminCount:r.userGroupMemberships?r.userGroupMemberships.admin:null,invitedCount:r.userGroupMemberships?r.userGroupMemberships.invited:null},f.groups=e.APIHelper.response.addOrReplaceListByPage({current:i.exists(a)?i.proxy(a).getValue("groups").getList():[],perPage:n.perPage,pageNum:n.page,totalItems:r.groups.total,newPages:l}),i.exists(a)?i.setValue(a,"groups",f.groups):i.add(f),f.groups}function r(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.groups.pools.getGroups",{extras:e.APIHelper.request.getRebootGroupExtras()+", icon_urls, needs_interstitial",page:n.page||0,per_page:n.perPage||400},!0),r.getModelRegistry("person-groups-models"),r.getModelRegistry("group-pool-models"),r.getModelRegistry("group-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-groups-pools-getGroups"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-groups-models","group-models","group-pool-models","person-models"]});
YUI.add("flickr-groups-fave-fetcher",function(e,t){"use strict";function n(e){}function r(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.groups.fave",n),r.getModelRegistry("person-groups-models")]).then(i._processResponse,e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-groups-fave"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","flickr-promise"],optional:["person-groups-models","api-helper"]});
YUI.add("flickr-groups-unfave-fetcher",function(e,t){"use strict";function n(e){}function r(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.groups.unfave",n),r.getModelRegistry("person-groups-models")]).then(i._processResponse,e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-groups-unfave"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","flickr-promise"],optional:["person-groups-models","api-helper"]});
YUI.add("flickr-people-getGroupsWithStatus-fetcher",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r.groups,a=n.id,f,l={},c=[];if(u)return e.Array.each(u,function(t,r){var i,u,a,l=s.parseGroupModel(n.id,n.pathAlias,t);i=s.addOrUpdate(l),c.push(i),t.viewDates?(t.viewDates.pool!=="0"?u=e.moment(t.viewDates.pool,"X"):u=o.getDefaultViewedDate(),t.viewDates.discussions!=="0"?a=e.moment(t.viewDates.discussions,"X"):a=o.getDefaultViewedDate(),a.isValid()||(a=o.getDefaultViewedDate()),u.isValid()||(u=o.getDefaultViewedDate())):(u=o.getDefaultViewedDate(),a=o.getDefaultViewedDate()),f={id:l.id,viewedPool:u,viewedDiscussions:a,group:i},o.addOrUpdate(f)}),l={id:a,memberCount:r.members?r.members:null,moderatorCount:0,adminCount:0,invitedCount:0},l[n.attribute]=c,i.exists(a)?i.setValue(a,n.attribute,l[n.attribute]):i.add(l),l[n.attribute]}function r(n,r){var i=this,s={extras:e.APIHelper.request.getRebootGroupExtras()+", icon_urls, date_activity, date_last_viewed",user_id:n.id,status:n.status};return n.id!==r.getViewer().nsid&&(s.public_only=1,s.status="2,3,4"),e.Promise.all([r.callAPI("flickr.people.getGroupsWithStatus",s,!0),r.getModelRegistry("person-groups-models"),r.getModelRegistry("group-models"),r.getModelRegistry("group-activity-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-people-getGroupsWithStatus"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-groups-models","group-models"]});
YUI.add("person-groups-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-people-getInfo"].run(t,this.appContext)},faveGroup:function(t,n){return e.ModelFetchers["flickr-groups-fave"].run(t,n)},unfaveGroup:function(t,n){return e.ModelFetchers["flickr-groups-unfave"].run(t,n)}},faveGroup:function(e){var t=this,n=e.group_id,r=e.user_id;return this.remote.faveGroup(e,this.appContext).then(null,function(){t.appContext.getModel("group-models",n).then(function(e){t.getValue(r,"groupsFaved").removeFromList(n)})}),this.appContext.getModel("group-models",n).then(function(e){t.getValue(r,"groupsFaved").appendToList(e)})},unfaveGroup:function(e){var t=e.group_id,n=e.user_id,r=this;return this.remote.unfaveGroup(e,this.appContext).then(null,function(){r.appContext.getModel("group-models",t).then(function(e){r.getValue(n,"groupsFaved").appendToList(e)})}),this.appContext.getModel("group-models",t).then(function(e){r.getValue(n,"groupsFaved").removeFromList(t)})},attributes:{id:{},memberCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},moderatorCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},adminCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},invitedCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},groups:{isListProxy:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-groups-pools-getGroups"]}},groupsAdministered:{isListProxy:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-getGroupsWithStatus"]}},groupsModerated:{isListProxy:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-getGroupsWithStatus"]}},groupsBelongingTo:{isListProxy:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-getGroupsWithStatus"]}},groupsFaved:{isListProxy:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-getGroupsWithStatus"]}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-groups-pools-getGroups-fetcher","flickr-people-getInfo-fetcher","flickr-groups-fave-fetcher","flickr-groups-unfave-fetcher","flickr-people-getGroupsWithStatus-fetcher"]});
YUI.add("flickr-photos-getContext-fetcher",function(e,t){"use strict";function n(t,n){var r;return r={photo_id:t.photoId,num_prev:t.numNext,num_next:t.numPrev,extras:e.APIHelper.request.getRebootPhotoExtras()},t.viewAs&&(r.view_as=t.viewAs),t.orderBy&&(r.order_by=t.orderBy),r}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=[],f=[],l=s.proxy(n.photoId),c=l.getValue("owner"),h,p,d,v,m,g,y=[];return h=r.prevphotos,p=r.nextphotos,f=e.APIHelper.response.parsePhotos({photos:h.photo,existingPerson:c,photoModelRegistry:s,photoEngagementModelRegistry:o,photoStatsModelRegistry:u}),a=e.APIHelper.response.parsePhotos({photos:p.photo,existingPerson:c,photoModelRegistry:s,photoEngagementModelRegistry:o,photoStatsModelRegistry:u}),v=i.getValue(n.id,"photoContextList"),m=v.hasMinBoundary?v.hasMinBoundary():!1,g=v.hasMaxBoundary?v.hasMaxBoundary():!1,d=v.getList(),y=e.APIHelper.response.addOrReplaceListByContext({model:l,next:f,prev:a.reverse(),hasMin:m,hasMax:g,current:d,numNext:n.numNext,numPrev:n.numPrev}),i.setValue(n.id,"photoContextList",y),{next:f,previous:a.reverse()}}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.photos.getContext",this._processParams(n,r),!0),r.getModelRegistry("photostream-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-photos-getContext"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photostream-models","photo-models","photo-engagement-models","photo-stats-models"]});
YUI.add("flickr-people-getPhotos-fetcher",function(e,t){"use strict";function n(t){var n={per_page:t.perPage||20,page:t.page||1,extras:e.APIHelper.request.getRebootPhotoExtras(),get_user_info:1,jump_to:t.withPhotoId||""};return t.id||t.userId?n.user_id=(t.id||t.userId).split("-")[0]:t.pathAlias&&(n.path_alias=t.pathAlias),t.privacyFilter&&(n.privacy_filter=t.privacyFilter),t.viewAs&&(n.view_as=t.viewAs),t.orderBy&&(t.orderBy==="datetaken"?n.sort="date-taken-desc":n.sort=t.orderBy),t.safeSearch&&(n.safe_search=t.safeSearch),t.media&&(n.media=t.media),t.withPhotoId&&(n.jump_to=t.withPhotoId),t.contentType&&(n.content_type=t.contentType),n}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f,l,c=r&&r.user?r.user.nsid:null,h=n.id||n.userId;if(!c)throw new Error("API was missing valid nsid");return l={id:c,pathAlias:r.user.pathAlias,owner:e.APIHelper.response.parsePerson(r.user),totalItems:r.photos.total},h&&h!==c&&(l.id=h),t[7]&&(l.id=c+"-"+e.Models["person-preferences-models"].buildContextSuffix(t[7],c)),l.owner=s.addOrUpdate(l.owner),f=e.APIHelper.response.parsePhotos({photos:r.photos.photo,ownerID:r.photos.owner,personModelRegistry:s,photoModelRegistry:i,photoEngagementModelRegistry:u,photoStatsModelRegistry:a}),l.photoPageList={perPage:r.photos.perpage,page:r.photos.page,pageContent:f,totalItems:parseInt(r.photos.total,10)||0},o.addOrUpdate(l),f}function i(n,r){var i=this,s=[r.callAPI("flickr.people.getPhotos",this._processParams(n),!0),r.getModelRegistry("photo-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photostream-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models")];return n.createCompoundID&&r.getViewer().signedIn&&r.getViewer().nsid&&s.push(r.getModel("person-preferences-models",r.getViewer().nsid)),e.Promise.all(s).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-people-getPhotos"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper","person-preferences-models"],optional:["photo-models","person-models","photostream-models","photo-engagement-models","photo-stats-models"]});
YUI.add("photostream-models",function(e,t){function n(e){n.superclass.constructor.call(this,e)}e.Models[this.name]=n,e.extend(n,e.FlickrModelRegistry,{langBundles:this.details.langBundles,name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-people-getPhotos"].run(t,this.appContext)}},attributes:{normalizedId:{readOnly:!0,defaultFn:function(e){return e.split("-")[0]}},displayType:{readOnly:!0,defaultFn:function(){return"photostream"}},title:{readOnly:!0,derivedBy:["owner","normalizedId"],defaultFn:function(e){var t=this.appContext.getViewer(),n=this.getValue(e,"normalizedId"),r;return t&&t.nsid===n?this.intlMessage({intlName:"models.YOUR_PHOTOSTREAM"}):(r=this.getValue(e,"owner"),r?this.intlMessage({intlName:"models.USER_PHOTOSTREAM",name:r.getValue("displayname")}):this.intlMessage({intlName:"models.PHOTOSTREAM"}))}},pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined},defaultFn:function(e){return this.getValue(e,"normalizedId")}},owner:{isModel:!0},isOwner:e.PhotoModelHelper.attributes.isOwner,photoPageList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-getPhotos"]}},photoContextList:{isListProxy:!0,contextFetch:{listFetcher:e.ListFetchers["flickr-photos-getContext"],listItemIdField:"photoId"}},url:{readOnly:!0,derivedBy:["owner","normalizedId"],defaultFn:function(e){var t=this.getValue(e,"owner"),n=this.getValue(e,"normalizedId"),r=t?t.getValue("pathAlias"):n;return"/photos/"+r+"/"}},totalItems:{defaultFn:function(){return null}},urlSuffix:{readOnly:!0,defaultFn:function(e){var t,r=n.splitCompoundId(e);return r.orderBy?(t=r.orderBy,r.viewAs?t+="-"+r.viewAs:r.orderBy==="dateposted"&&(t="photostream")):t="photostream",t}}}},{buildCompoundId:function(e,t,n){var r=e;return t&&(r+="-"+t),n&&(t||(r+="-dateposted"),r+="-"+n),r},splitCompoundId:function(e){var t=e.split("-");return{nsid:t[0],orderBy:t[1],viewAs:t[2]}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getContext-fetcher","flickr-people-getPhotos-fetcher","photo-model-helper"],langBundles:["models"]});
YUI.add("flickr-prefs-setSafeSearch-updater",function(e,t){"use strict";function n(n,r){return r.callAPI("flickr.prefs.setSafeSearch",n).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-prefs-setSafeSearch"]={run:n}},"@VERSION@",{requires:["flickr-promise"]});
YUI.add("person-preferences-models",function(e){function t(e){t.superclass.constructor.call(this,e)}t.UNIFIED_SEARCH_VIEW_TYPES={justified:"jst",thumbs:"thm",tiles:"til"},t.UNIFIED_SEARCH_VIEW_TYPE_DEFAULT=t.UNIFIED_SEARCH_VIEW_TYPES.justified,t.PHOTOSTREAM_VIEW_ORDER_TYPES={dateposted:"dc",datetaken:"dt"},t.PHOTOSTREAM_VIEW_ORDER_DEFAULT=t.PHOTOSTREAM_VIEW_ORDER_TYPES.dateposted,t.PHOTOSTREAM_VIEW_AS_TYPES={me:"me",friend:"fr",family:"fa",ff:"ff","public":"pu"},t.PHOTOSTREAM_VIEW_PREF_MAP={me:"me",fr:"friend",fa:"family",ff:"ff",pu:"public",dc:"dateposted",dt:"datetaken"},t.ALBUM_VIEW_LAYOUT_TYPES={justified:"justified",story:"story"},t.ALBUM_VIEW_LAYOUT_DEFAULT=t.ALBUM_VIEW_LAYOUT_TYPES.story,t.PHOTOSTREAM_VIEW_AS_DEFAULT=t.PHOTOSTREAM_VIEW_AS_TYPES.public,e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-people-getInfo"].run(t,this.appContext)},update:function(t,n){var r=[],i={};return e.Lang.isObject(n,!0)&&("safeSearch"in n?(i.safe_search=e.AttributeHelpers.coerceInteger(n.safeSearch.newVal)+1,r.push(e.ModelUpdaters["flickr-prefs-setSafeSearch"].run(i,this.appContext))):"photostreamViewOrderPref"in n||"photostreamViewAsPref"in n?(n.photostreamViewOrderPref&&(i.photostream_view_order_pref=n.photostreamViewOrderPref.newVal),n.photostreamViewAsPref&&(i.photostream_view_as_pref=n.photostreamViewAsPref.newVal),r.push(this.appContext.callAPI("flickr.prefs.setPrefs",i))):"albumViewLayoutPref"in n?(n.albumViewLayoutPref&&(i.album_view_layout=n.albumViewLayoutPref.newVal),r.push(this.appContext.callAPI("flickr.prefs.setPrefs",i))):Object.keys(n).forEach(function(e){e==="unifiedSearchViewPref"?i.unified_search_view_pref=n.unifiedSearchViewPref.newVal:i[e]=n[e],r.push(this.appContext.callAPI("flickr.prefs.setPrefs",i))})),e.Promise.all(r)},readUserPrefs:function(e,t){return t.callAPI("flickr.feed.preferences.getUserPreferences",e,t).then(function(e){return e},function(e){})}},remoteReadUserPrefs:function(e,t,n){return this.remote.readUserPrefs(t,n).then(function(e){return e},function(e){})},attributes:{safeSearch:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},unifiedSearchViewPref:{validator:function(n){return e.AttributeHelpers.validateString(n)?Object.keys(t.UNIFIED_SEARCH_VIEW_TYPES).some(function(e){return t.UNIFIED_SEARCH_VIEW_TYPES[e]===n}):!1},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:t.UNIFIED_SEARCH_VIEW_TYPE_DEFAULT},photostreamViewOrderPref:{validator:function(n){return e.AttributeHelpers.validateString(n)?Object.keys(t.PHOTOSTREAM_VIEW_ORDER_TYPES).some(function(e){return t.PHOTOSTREAM_VIEW_ORDER_TYPES[e]===n}):!1},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:t.PHOTOSTREAM_VIEW_ORDER_DEFAULT},photostreamViewAsPref:{validator:function(n){return e.AttributeHelpers.validateString(n)?Object.keys(t.PHOTOSTREAM_VIEW_AS_TYPES).some(function(e){return t.PHOTOSTREAM_VIEW_AS_TYPES[e]===n}):!1},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:t.PHOTOSTREAM_VIEW_AS_DEFAULT},albumViewLayoutPref:{validator:function(n){return e.AttributeHelpers.validateString(n)?Object.keys(t.ALBUM_VIEW_LAYOUT_TYPES).some(function(e){return t.ALBUM_VIEW_LAYOUT_TYPES[e]===n}):!1},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:t.ALBUM_VIEW_LAYOUT_DEFAULT}}},{getReadablePrefName:function(e){return t.PHOTOSTREAM_VIEW_PREF_MAP[e]},buildContextSuffix:function(t,n){var r=e.Models["person-preferences-models"].getReadablePrefName(t.getValue("photostreamViewOrderPref")),i=e.Models["person-preferences-models"].getReadablePrefName(t.getValue("photostreamViewAsPref"));return i===e.Models["person-preferences-models"].PHOTOSTREAM_VIEW_PREF_MAP.me||t.id!==n?r:r+"-"+i}})},"@VERSION@",{requires:["flickr-model-registry","flickr-people-getInfo-fetcher","flickr-prefs-setSafeSearch-updater","attribute-helpers"]});
YUI.add("flickr-people-getInfo-fetcher",function(e,t){"use strict";function n(t,n){var r={datecreate:1};r.extras=e.APIHelper.request.getRebootPeopleExtras(),YUI.Env.isServer&&t.id===n.request.probableUser&&(r.storage=1,r.extras+=", classic_user_id, active_group_membership, timezone_dst, unified_search_view_pref, photostream_view_order_pref, photostream_view_as_pref, album_view_layout, download_pref",n.flipper.isFlipped("enable-new-pro")&&(r.extras+=", products_features"),r.extras+=", is_minor"),t.extras&&typeof t.extras=="string"&&t.extras.length>0&&(r.extras=r.extras+","+t.extras);if(t.id)r.user_id=t.id;else{if(!t.pathAlias)throw new Error("`fetch` is missing required params.");r.path_alias=t.pathAlias}return t.storage&&(r.storage=t.storage),r.extras||(r.extras=""),r.extras+=", has_stats",r}function r(t,n,r){var i=t.apiResponse,s=t.personModelRegistry,o=t.personRelationshipModelRegistry,u=t.personProfileModelRegistry,a=t.personPreferencesModelRegistry,f=t.personGroupsModelRegistry,l=t.personNotificationsModelRegistry,c=t.photostreamModelRegistry,h,p=i.person,d,v=r.getViewer(),m=p.id,g;return g={id:m,pathAlias:p.pathAlias,username:p.username&&p.username._content,realname:p.realname&&p.realname._content,buddyicon:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(p.iconurls),isAdFree:p.isAdFree,isPro:p.ispro,isMinor:p.isMinor,canBuyPro:p.canBuyPro,hasStats:p.hasStats,location:p.location&&p.location._content,hasAdfree:p.hasAdfree,has1TB:p.has1TB,has2TB:p.has2TB,hasUnlimitedStorage:p.hasUnlimitedStorage,hasFreeStandardShipping:p.hasFreeStandardShipping,hasFreeEducationalResources:p.hasFreeEducationalResources,dateCreated:p.datecreate._content,expiringPartner:p.expiringPartner},p.ispro&&(g.proExpireDate=p.expire),s.addOrUpdate(g),l.addOrUpdate({id:m,unreadFlickrMailCount:p.unreadMessages?p.unreadMessages.content:0}),o.addOrUpdate({id:m,pathAlias:p.pathAlias,isContact:p.contact,isFriend:p.friend,isFamily:p.family,isIgnored:p.ignored,isIgnoredBy:p.ignoredby,isRevContact:p.revcontact,isRevFriend:p.revfriend,isRevFamily:p.revfamily}),v&&v.signedIn&&m===v.nsid&&(d={id:m},p.safeSearch&&(d.safeSearch=(p.safeSearch||1)-1),p.viewPrefs&&(d.unifiedSearchViewPref=p.viewPrefs.unifiedSearchViewPref,d.photostreamViewOrderPref=p.viewPrefs.photostreamViewOrderPref,d.photostreamViewAsPref=p.viewPrefs.photostreamViewAsPref,d.albumViewLayoutPref=p.viewPrefs.albumViewLayout),a.exists(m)?a.setValues(m,d):a.add(d)),h={id:m,coverPhotoUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(p.coverphoto_url),photoCount:p.photos.count.content,location:p.location?p.location.content:null},p.storage&&(h.storageUsed=p.storage.used.content,h.storageTotal=p.storage.total.content),p.unreadMessages&&(h.unreadMessages=p.unreadMessages.content),u.addOrUpdate(h),f.addOrUpdate({id:m,memberCount:p.groupMemberships?p.groupMemberships.member:null,moderatorCount:p.groupMemberships?p.groupMemberships.moderator:null,adminCount:p.groupMemberships?p.groupMemberships.admin:null,invitedCount:p.groupMemberships?p.groupMemberships.invited:null}),c.addOrUpdate({id:m,pathAlias:p.pathAlias,owner:s.proxy(m),totalItems:p.photos.count&&p.photos.count.content}),p}function i(n,r){var i=this,s=r.getViewer(),o=!0;return s&&s.signedIn&&(n.id===s.nsid||n.nsid===s.nsid)&&(n.storage=1),(new e.FlickrPromise({apiResponse:r.callAPI("flickr.people.getInfo",this._processParams(n,r),o),personModelRegistry:r.getModelRegistry("person-models"),personRelationshipModelRegistry:r.getModelRegistry("person-relationship-models"),personProfileModelRegistry:r.getModelRegistry("person-profile-models"),personPreferencesModelRegistry:r.getModelRegistry("person-preferences-models"),personGroupsModelRegistry:r.getModelRegistry("person-groups-models"),personNotificationsModelRegistry:r.getModelRegistry("person-notifications-models"),photostreamModelRegistry:r.getModelRegistry("photostream-models")})).then(function(e){return i._processResponse(e,n,r)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-people-getInfo"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise"],optional:["person-models","person-relationship-models","person-preferences-models","person-profile-models","person-groups-models","photostream-models","api-helper"]});
YUI.add("person-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-people-getInfo"].run(t,this.appContext)}},attributes:{pathAlias:e.PersonModelHelper.attributes.pathAlias,username:e.PersonModelHelper.attributes.username,realname:e.PersonModelHelper.attributes.realname,displayname:e.PersonModelHelper.attributes.displayname,nsid:e.PersonModelHelper.attributes.nsid,url:e.PersonModelHelper.attributes.url,isMe:e.PersonModelHelper.attributes.isMe,buddyicon:{},isPro:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},isMinor:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},proExpireDate:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},canBuyPro:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultFn:function(){return!1}},isDeleted:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},isAdFree:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},isNoAds:{derivedBy:["isPro","isAdFree"],readOnly:!0,getter:function(e,t){var n=this.getValue(t,"isPro"),r=this.getValue(t,"isAdFree");return n||r}},hasStats:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},hasAdfree:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},has1TB:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},has2TB:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},hasUnlimitedStorage:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},hasFreeStandardShipping:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},hasFreeEducationalResources:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},dateCreated:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},location:{defaultFn:function(){return""}},expiringPartner:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultFn:function(){return!1}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-people-getInfo-fetcher","attribute-helpers","person-model-helper"]});
YUI.add("hermes-template-global-nav",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"gn-signed-in"},3:function(e,t,n,r,i){return"gn-signed-out"},5:function(e,t,n,r,i){return" top-banner"},7:function(e,t,n,r,i){return"		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["partner-account-banner-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},9:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},(s=t!=null?t.elements:t)!=null?s.right_side_signup:s,{name:"unless",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:""},10:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li role="menuitem"\n						class="gn-signup"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'">\n						<a data-track="gnSignupClick"\n							class="gn-title butt"\n							href="/signup">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+"</a>\n					</li>\n"},12:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<li role="menuitem"\n						data-context="you"\n						aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+'">\n						<a data-track="gnYouMainClick"\n							class="gn-title you"\n							href="'+a(e.lambda((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'"\n							aria-haspopup="true"\n							aria-expanded="false">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+"</a>\n\n"+((s=(n.isFlipped||t&&t.isFlipped||u).call(o,"enable-updated-navigation-profile",{name:"isFlipped",hash:{},fn:e.program(13,i,0),inverse:e.program(20,i,0),data:i}))!=null?s:"")+"					</li>\n"},13:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'							<ul class="gn-submenu" role="menu" aria-label="submenu">\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+'">\n									<a data-track="gnYouAboutClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.profile:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'">\n									<a data-track="gnYouPhotostreamClick" href="'+a(f((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))!=null?s:"")+'">\n									<a data-track="gnYouSetsClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))!=null?s:"")+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAVES_SHORT"},data:i}))+'">\n									<a data-track="gnYouFavoritesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAVES_SHORT"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'">\n									<a data-track="gnYouGalleriesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'">\n									<a data-track="gnYouGroupsClick" href="/groups">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+"</a>\n								</li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.noop,data:i}))!=null?s:"")+'								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'">\n									<a data-track="gnYouCameraRollClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a>\n								</li>\n								<li class="divider"\n									tabindex="-1">\n									&nbsp;\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+'">\n									<a data-track="gnYouRecentActivityClick" href="/activity">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call
(o,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'">\n									<a data-track="gnYouPeopleClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.people:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+'">\n									<a data-track="gnYouOrganizeClick" href="/photos/organize">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+"</a>\n								</li>\n							</ul>\n"},14:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.SETS"},data:i}))},16:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.ALBUMS"},data:i}))},18:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'									<li class="menuitem"\n										role="menuitem"\n										aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+'">\n										<a data-track="gnYouStatsClick" href="'+a(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.stats:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+"</a>\n									</li>\n"},20:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'							<ul class="gn-submenu" role="menu" aria-label="submenu">\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'">\n									<a data-track="gnYouCameraRollClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'">\n									<a data-track="gnYouPhotostreamClick" href="'+a(f((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))!=null?s:"")+'">\n									<a data-track="gnYouSetsClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))!=null?s:"")+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'">\n									<a data-track="gnYouFavoritesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'">\n									<a data-track="gnYouGroupsClick" href="/groups">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'">\n									<a data-track="gnYouGalleriesClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATIONS"},data:i}))+'">\n									<a data-track="gnYouCreationsClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.creations:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATIONS"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'">\n									<a data-track="gnYouPeopleClick" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.people:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'</a>\n								</li>\n								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+'">\n									<a data-track="gnYouRecentActivityClick" href="/activity">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+"</a>\n								</li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(18,i,0),inverse:
e.noop,data:i}))!=null?s:"")+'								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+'">\n									<a data-track="gnYouOrganizeClick" href="/photos/organize">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+"</a>\n								</li>\n							</ul>\n"},22:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<li class="toplink"\n						role="menuitem"\n						aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'">\n						<a data-track="gnYouMainClick"\n						class="gn-link"\n						href="'+a(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'"><span>'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+"</span></a>\n					</li>\n"},24:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<li role="menuitem"\n						data-context="explore"\n						aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'">\n						<a data-track="gnExploreMainClick"\n							class="gn-title explore"\n							href="/explore"\n							aria-haspopup="true"\n							aria-expanded="false">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'</a>\n						<ul class="gn-submenu" role="menu" aria-label="submenu">\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'">\n								<a data-track="gnExploreRecentPhotosClick" href="/explore">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+'">\n								<a data-track="gnExploreTagsClick" href="/photos/tags">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+"</a></li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.vr_link:s,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))!=null?s:"")+'							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'">\n								<a data-track="gnExploreTheCommonsClick" href="/commons">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'</a>\n							</li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+'">\n								<a data-track="gnExploreGalleriesClick" href="/galleries">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+'</a>\n							</li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.WORLD_MAP"},data:i}))+'">\n								<a data-track="gnExploreWorldMapClick" href="/map">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.WORLD_MAP"},data:i}))+'</a>\n							</li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERA_FINDER"},data:i}))+'">\n								<a data-track="gnExploreCameraFinderClick" href="/cameras">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERA_FINDER"},data:i}))+"</a>\n							</li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.weekly_flickr:s,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+'">\n								<a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+"</a>\n							</li>\n						</ul>\n					</li>\n"},25:function(e,t,n,r,i){return'								<li role="menuitem"\n									aria-label="Flickr VR">\n									<a data-track="gnExploreVRLandingClick" href="/vr">Flickr VR</a></li>\n'},27:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'								<li role="menuitem"\n									aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+'">\n									<a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+"</a>\n								</li>\n"},29:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li role="menuitem"\n						class="gn-create"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'">\n						<a data-track="gnCreateMainClick"\n						class="gn-title"\n						href="/create">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+"</a>\n					</li>\n"},31:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'					<li role="menuitem"\n						class="gn-create"\n						aria-haspopup="true"\n						aria-expanded="false"\n						aria-label="'+
a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'">\n						<a data-track="gnCreateMainClick"\n						class="gn-title"\n						href="/create">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'</a>\n\n						<ul class="gn-submenu" role="menu" aria-label="submenu">\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_NEW"},data:i}))+'">\n								<a data-track="gnCreateNew" href="/create">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_NEW"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_WALLART"},data:i}))+'">\n								<a data-track="gnCreateWallArt" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.mywallart:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_WALLART"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_PHOTOS_BOOKS"},data:i}))+'">\n								<a data-track="gnCreatePhotoBooks" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.myphotobooks:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_PHOTOS_BOOKS"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_ORDER_HISTORY"},data:i}))+'">\n								<a data-track="gnCreateOrderHistory" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.wallet:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_ORDER_HISTORY"},data:i}))+"</a></li>\n						</ul>\n					</li>\n\n"},33:function(e,t,n,r,i){return'					<li class="gn-search-box"\n						role="menuitem">\n						<svg class="icon icon-search mobile-search-button mobile-only"><use xlink:href="#icon-search"></use></svg>\n						'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["search-autosuggest-field-view"]:t,{name:"outlet",hash:{},data:i}))+'\n						<svg class="icon mobile-search-close-button mobile-only"><use xlink:href="#icon-close"></use></svg>\n					</li>\n'},35:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li class="gn-upload desktop-only"\n						role="menuitem">\n						<a data-track="gnUploadIconMain"\n							class="gn-title"\n							href="/upload"\n							aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+'">\n							<i class="upload-icon" title="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+'" aria-hidden="true">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+"</i>\n						</a>\n					</li>\n"},37:function(e,t,n,r,i){return'					<li role="menuitem">\n						'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["notifications-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n					</li>\n"},39:function(e,t,n,r,i){return'					<li role="menuitem">\n						'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["account-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n					</li>\n"},41:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li class="gn-signin"\n						role="menuitem"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.SIGN_IN"},data:i}))+'">\n						<a data-track="gnSignin"\n							class="gn-title"\n							href="/signin">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.LOG_IN"},data:i}))+"</a>\n					</li>\n"},43:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.elements:t)!=null?s.right_side_signup:s,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))!=null?s:""},44:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li class="gn-signup"\n						role="menuitem"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'">\n						<a data-track="gnSignupClick"\n							class="gn-title butt"\n							href="/signup">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+"</a>\n					</li>\n"},46:function(e,t,n,r,i){var s;return'					<div class="mobile-nav-column">\n'+((s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"enable-updated-navigation-profile",{name:"isFlipped",hash:{},fn:e.program(47,i,0),inverse:e.program(50,i,0),data:i}))!=null?s:"")+"					</div>\n"},47:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'							<div class="mobile-nav-menu-item"><a data-track="gnYouAboutClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.profile:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouPhotostreamClick" href="'+u(o((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouSetsClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums
:s,t))+'">'+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))!=null?s:"")+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouFavoritesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouGalleriesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouGroupsClick" href="/groups">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+"</a></div>\n							"+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(48,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n							<div class="mobile-nav-menu-item"><a data-track="gnYouCameraRollClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouRecentActivityClick" href="/activity">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+"</a></div>\n"},48:function(e,t,n,r,i){var s,o=e.escapeExpression;return'<div class="mobile-nav-menu-item"><a data-track="gnYouStatsClick" href="'+o(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.stats:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+"</a></div>"},50:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'							<div class="mobile-nav-menu-item"><a data-track="gnYouCameraRollClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouPhotostreamClick" href="'+u(o((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouSetsClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.program(16,i,0),data:i}))!=null?s:"")+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouFavoritesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouGroupsClick" href="/groups">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouGalleriesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a></div>\n							<div class="mobile-nav-menu-item"><a data-track="gnYouRecentActivityClick" href="/activity">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+"</a></div>\n							"+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(48,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},52:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<div class="mobile-nav-column">\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreMainClick" class="explore" href="/explore" aria-haspopup="true">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreRecentPhotosClick" href="/explore">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreTagsClick" href="/photos/tags">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreTheCommonsClick" href="/commons">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreGalleriesClick" href="/galleries">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+"</a></div>\n						"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.weekly_flickr:s,{name:"if",hash:{},fn:e.program(53,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+"</a></div>\n					</div>\n"},53:function(e,t,n,r,i){return'<div class="mobile-nav-menu-item"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">'+
e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+"</a></div>"},55:function(e,t,n,r,i){return"		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["browser-upgrade-banner-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["mobile-app-upsell-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="global-nav '+f((o=(o=n.theme||(t!=null?t.theme:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"theme",hash:{},data:i}):o))+" "+((s=n["if"].call(u,t!=null?t.isSignedIn:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'">\n	<div class="global-nav-shim'+((s=n["if"].call(u,t!=null?t.showPartnerAccountBanner:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></div>\n\n'+((s=n["if"].call(u,t!=null?t.showPartnerAccountBanner:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n	<div class="global-nav-content styleguide-global-nav fluid sohp-mobile-navable'+((s=n["if"].call(u,t!=null?t.showPartnerAccountBanner:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n		<div class="global-nav-container fluid-centered" role="navigation" aria-label="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.MAIN"},data:i}))+'">\n			<div class="mobile-nav-toggle mobile-only"><span></span></div>\n\n			<div class="flickr-logo-container">\n				<a href="/"\n					class="main-logo"\n					data-track="gnLogoClick"\n					title="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i}))+'"\n					role="heading"\n					aria-level="1"\n					aria-label="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i}))+'">\n					<svg class="icon icon-flickr_logo"><use xlink:href="#icon-flickr_logo"></use></svg>\n				</a>\n			</div>\n\n			<ul class="nav-menu desktop-only" role="menubar">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signup_link:s,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_menu:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_link:s,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.explore_menu:s,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_link:s,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_menu:s,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:"")+'			</ul>\n\n			<ul class="gn-tools"\n				role="menubar">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.search_bar:s,{name:"if",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.upload_icon:s,{name:"if",hash:{},fn:e.program(35,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showNotificationsMenu:t,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.account_menu:s,{name:"if",hash:{},fn:e.program(39,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signin_link:s,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signup_link:s,{name:"if",hash:{},fn:e.program(43,i,0),inverse:e.noop,data:i}))!=null?s:"")+'			</ul>\n\n			<div class="mobile-nav mobile-only">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_menu:s,{name:"if",hash:{},fn:e.program(46,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.explore_menu:s,{name:"if",hash:{},fn:e.program(52,i,0),inverse:e.noop,data:i}))!=null?s:"")+"			</div>\n		</div>\n	</div>\n\n"+((s=n["if"].call(u,t!=null?t["show-browser-upgrade-banner"]:t,{name:"if",hash:{},fn:e.program(55,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["person-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["signup-rail-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("search-url",function(e,t){function u(e){return typeof e=="number"?e.toString():typeof e=="boolean"?e?"1":"0":typeof e=="string"?e:undefined}var n=require("lib/flog")(t),r,i,s=/^\/search(?:\/.*)?$/,o=/^bw|blackandwhite$/;YUI.Env.isServer?r=require("querystring").stringify:r=e.QueryString.stringify,i=function(t,r,s){var o,a,f,l,c;this.appContext=r;if(typeof t=="string"){c=t.split("?"),s?this.searchType=s:(a=c[0].split("/"),a[0].indexOf("http")!==-1?f=3:f=1,l="/"+a.slice(f).join("/"),this.searchType=this.getSearchTypeFromPathname(l)),c=c.length>1?c[1]:"",this.params={};if(c)try{c=e.QueryString.parse(c),this.params=e.SearchHelper.mapClassicSearchToAPI(c,r)}catch(h){n.warn("malformed query",{err:h,query:c})}}else this.params=e.merge(t),this.searchType=s;for(o in this.params)this.params.hasOwnProperty(o)&&(this.params[o]=u(this.params[o]));this.params.color_codes&&(this.colors=this.params.color_codes.toString().split(",")),this.searchType||this.setSearchType(i.searchTypes.UNDEFINED)},i.prototype.setSearchType=function(t){var n=this.getSearchTerm();return this.searchType=t,this.params=this.validateParams(this.params,this.searchType),this.params=e.merge(this.getDefaultParams(this.searchType),this.params),n&&this.setSearchTerm(n),this},i.prototype.getSearchTypeFromPathname=function(e){e=e||this.pathname,e=e.toLowerCase(),e=e.split("/").join("");switch(e){case"searchpeople":return i.searchTypes.PEOPLE;case"searchgroups":return i.searchTypes.GROUPS;case"search":default:return i.searchTypes.PHOTOS}},i.prototype.getPathname=function(){var e="/search/";switch(this.searchType){case i.searchTypes.PEOPLE:e+="people/";break;case i.searchTypes.GROUPS:e+="groups/";break;case i.searchTypes.CLASSIC_GROUPS:e="/search_groups.gne";break;case i.searchTypes.PHOTOS:default:}return e},i.prototype.validateParams=function(t,n){var r,s={},o,u;t=e.merge(t);switch(n){case i.searchTypes.PEOPLE:r=e.merge(e.SearchHelper.PEOPLE_SEARCH_API),r.text="text";break;case i.searchTypes.GROUPS:r=e.merge(e.SearchHelper.GROUPS_SEARCH_API);break;case i.searchTypes.PHOTOS:r=e.merge(e.SearchHelper.API,e.SearchHelper.UNIFIED_STATE_PARAMS);break;case i.searchTypes.UNDEFINED:default:return t}if(r)for(o in r)u=r[o],typeof t[u]!="undefined"&&(s[u]=t[u]);return s},i.prototype.getDefaultParams=function(t){var n={};switch(t){case i.searchTypes.PEOPLE:e.SearchHelper.addPeopleParamDefaults(n);break;case i.searchTypes.GROUPS:e.SearchHelper.addGroupsParamDefaults(n);break;case i.searchTypes.PHOTOS:e.SearchHelper.addParamDefaults(n);break;case i.searchTypes.UNDEFINED:default:}return n},i.prototype.getAPIParams=function(){return e.merge(this.params)},i.prototype.getAPIParam=function(e){return this.params[e]},i.prototype.setAPIParam=function(e,t){return this.params[e]=u(t),this},i.prototype.removeAPIParam=function(e){return delete this.params[e],this},i.prototype.removeAllAPIParams=function(){return this.params={},this},i.prototype.getSearchTerm=function(){var t=this.params[this.getSearchTermKey(this.searchType)];return t||(t=this.params[e.SearchHelper.API.tags]),t||""},i.prototype.setSearchTerm=function(t){var n=this.getSearchTermKey(this.searchType);return delete this.params[e.SearchHelper.PEOPLE_SEARCH_API.username],delete this.params[e.SearchHelper.GROUPS_SEARCH_API.text],delete this.params[e.SearchHelper.API.text],delete this.params[e.SearchHelper.API.tags],delete this.params.q,this.params[n]=t,this},i.prototype.getSearchTermKey=function(t){switch(t){case i.searchTypes.PEOPLE:return e.SearchHelper.PEOPLE_SEARCH_API.username;case i.searchTypes.GROUPS:return e.SearchHelper.GROUPS_SEARCH_API.text;case i.searchTypes.PHOTOS:default:return this.params[e.SearchHelper.API.tags]||this.params[e.SearchHelper.API.tags]===""?e.SearchHelper.API.tags:e.SearchHelper.API.text}},i.prototype.removeScope=function(){return e.SearchHelper.SEARCH_SCOPE_PARAMS.forEach(function(e){this.removeAPIParam(e)}.bind(this)),this.removeAPIParam(e.SearchHelper.API.excludeUserId),this},i.prototype.resetToUnified=function(){return this.params[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(this.removeAPIParam(e.SearchHelper.API.userId),this.removeAPIParam(e.SearchHelper.API.contacts),this.removeAPIParam(e.SearchHelper.API.groupId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.albums)),this.removeAPIParam(e.SearchHelper.API.similarityId),this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll),this},i.prototype.hasAdvancedParams=function(t){return Object.keys(this.params).some(function(n){return e.SearchHelper.UNIFIED_ADVANCED_PARAMS.indexOf(n)!==-1||!t&&e.SearchHelper.UNIFIED_QUICK_FILTER_PARAMS.indexOf(n)!==-1||!t&&e.SearchHelper.UNIFIED_TOOLBAR_PARAMS.indexOf(n)!==-1})},i.prototype.resetAdvancedParam=function(t,n){return this.hasAdvancedParams(t)?this.setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced,1):n||this.removeAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.advanced),this},i.prototype.createNewSearch=function(e){this.setSearchTerm(e),this.removeScope();if(this.searchType===i.searchTypes.UNDEFINED||this.searchType===i.searchTypes.PHOTOS)this.resetToUnified(),this.resetAdvancedParam();return this},i.prototype.getURL=function(){var e=this.getId(),t=this.getPathname();return e===i.EMPTY_SEARCH_ID?t:t+"?"+e},i.prototype.getId=function(){var t={},n,s=e.SearchHelper.API;for(n in this.params)s[n]?t[s[n]]=this.params[n]:t[n]=this.params[n];return r(t)||i.EMPTY_SEARCH_ID},i.prototype.clone=function(){var e=new i(this.params,this.appContext,this.searchType);return e},i.prototype.setMedia=function(t,n){var r;t||(t=!1),n||(n=!1),t&&n?r="all":t?r="photos":r="videos",this.setAPIParam(e.SearchHelper.API.mediaType,r)},i.prototype._syncColors=function(){this.colors&&this.colors.length>0?this.params.color_codes=this.colors.join(","):this.removeAPIParam("color_codes")},i.prototype.addColorCode=function(e){if(e&&e.match(o)){this.clearColorCodes(),this.colors=["bw"],this._syncColors();return}this.colors&&this.colors.indexOf("bw")!==-1&&(this.colors=[]),this.colors||(this
.colors=[]),this.colors.indexOf(e)===-1&&(this.colors.push(e),this._syncColors())},i.prototype.removeColorCode=function(e){var t;this.colors&&(t=this.colors.indexOf(e),t!==-1&&(this.colors.splice(t,1),this._syncColors()))},i.prototype.clearColorCodes=function(){this.colors=[],this._syncColors()},i.isSearchUrl=function(e){return s.test(e)},i.searchTypes={UNDEFINED:0,PHOTOS:1,PEOPLE:2,GROUPS:3,CLASSIC_GROUPS:4},i.EMPTY_SEARCH_ID="-1",e.SearchUrl=i},"@VERSION@",{requires:["search-helper","querystring-parse-simple","querystring-stringify-simple"]});
YUI.add("hermes-template-search-pill",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<li class="search-pill" '+((s=n["if"].call(u,t!=null?t.id:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"+f((n.truncate||t&&t.truncate||a).call(u,t!=null?t.name:t,20,{name:"truncate",hash:{},data:i}))+'<div class="search-pill-divider"></div>'+f((o=(o=n.secondName||(t!=null?t.secondName:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"secondName",hash:{},data:i}):o))+'<i class="search-pill-remover"></i></li>\n'},2:function(e,t,n,r,i){var s;return"id="+e.escapeExpression((s=(s=n.id||(t!=null?t.id:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"id",hash:{},data:i}):s))},4:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<li class="search-pill" '+((s=n["if"].call(o,t!=null?t.id:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")+">"+e.escapeExpression((n.truncate||t&&t.truncate||n.helperMissing).call(o,t!=null?t.name:t,30,{name:"truncate",hash:{},data:i}))+'<i class="search-pill-remover"></i></li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.combo:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(4,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/search-pill",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
