YUI.add("hermes-lang-default",function(e,t){e.Intl.add("hermes/default","en-US",{UNTITLED:["Untitled"]})},"@VERSION@",{requires:["intl"]});
YUI.add("groups-toolbar-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"fluid-share-group-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,parentViewName:this.name,disabled:function(e){return e.isMobile}}},buildContainer:function(){return this.setContainerWithTemplate("groups-toolbar-view"),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-groups-toolbar-view","fluid-share-group-view"],optional:[],langBundles:["groups"]});
YUI.add("group-home-page-view",function(e,t){var n;e.namespace("Views")[this.name]=e.Base.create("group-home-page-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,e.nsid=e.groupId,this.isTwitterbot=e.isTwitterbot,this.pageParams=e.pageParams,this.notification=e.notification,this.showPool=e.showPool,this.showDiscussion=e.showDiscussion,this.localStorageKey=this.groupId+this.appContext.getViewer().nsid,n=this.intlMessage({intlName:"groups.GROUPS"})+" "+this.intlMessage({intlName:"common.BETA"}),e.subnavConfig={selected:"overview"},this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"group-pool-preview-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,titleKey:"groups.POOL_PREVIEW_HEADER",disabled:function(){return!this.showPool}},"groups-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-magic-groups-subnav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-group-coverphoto-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"group-discussion-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,titleKey:"groups.DISCUSSIONS",disabled:function(){return!this.showDiscussion}},"group-top-contributors-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,titleKey:"groups.TOP_CONTRIBUTORS"},"opt-out-widget-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,optOutLabelText:function(){return n},optOutFeedbackUrl:function(){return e.flutil.getGroupsOptoutValues(this.flippers).url},optOutFlippers:function(){return e.flutil.getGroupsOptoutValues(this.flippers).flippers}},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"group-18-plus-confirmation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"group-blast-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"signup-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,pageType:"group"}},loadState:function(){var t=this,n={groupInfo:this.appContext.getModel("group-info-models",this.groupId),groupBlast:this.appContext.getModel("group-blast-models",this.groupId),groupActivity:this.appContext.getModel("group-activity-models",this.groupId)};return(new e.FlickrPromise(n)).then(function(e){return t.set("needsInterstitial",e.groupInfo.getValue("group").getValue("needsInterstitial")),t.set("groupInfoModel",e.groupInfo),t.set("groupModel",e.groupInfo.getValue("group")),t.set("groupBlastModel",e.groupBlast),t.set("groupActivityModel",e.groupActivity),t.appContext.getModel("group-pool-models",t.groupId).then(function(e){t.set("groupPoolModel",e)},function(e){if(e.code!==2&&e.code!==4)throw e})})},buildContainer:function(){var e,t=!0,n,r=this.makeAdditionalInfo(),i=!1,s=this.get("groupModel").toJSON(),o=s.url+"admin/pending",u=s.urlPendingMembersPage,a;this.get("groupInfoModel").getValue("group").getValue("isMember")?a=!1:a=this.get("needsInterstitial");if(s.isModerator||s.isAdmin)s.pendingCount>0&&(i=!0),s.memberPendingCount>0&&(n=!0);return e={"group-info":this.get("groupInfoModel").toJSON(),additionalField:r,discussionHidden:t,notification:this.notification,showPool:this.showPool,showDiscussion:this.showDiscussion,showPendingCount:i,showMemberPendingCount:n,pendingCount:s.pendingCount,pendingAdminURL:o,pendingMemberCount:s.memberPendingCount,pendingMemberURL:u,needsInterstitial:a},e.centeredContainerClass="fluid-centered",this.setContainerWithTemplate("group-home-page",e),this},activate:function(){var t=this;return e.StorageHelper.getItem(this.localStorageKey)&&(this.set("needsInterstitial",!1),this.buildContainer()),this.subviews["group-18-plus-confirmation-view"].on("clickSee18Plus",function(e){t.set("needsInterstitial",!1),t.buildContainer()}),this.get("needsInterstitial")&&this.subviews["group-18-plus-confirmation-view"].isActivated&&this.subviews["group-18-plus-confirmation-view"].removeLoadingState(),e.later(100,this,function(){e.use("photo-page-scrappy-view")}),this},makeAdditionalInfo:function(){var e,t=this.get("groupInfoModel"),n=t.getValue("throttle"),r=t.getValue("restrictions"),i,s,o;if(n||r)e=[],n&&n.mode!=="none"&&n.mode!=="disabled"&&(n.mode==="ever"?s="groups.POST_THRESHOLD_EVER":n.mode==="day"?s="groups.POST_THRESHOLD_DAY":n.mode==="month"?s="groups.POST_THRESHOLD_MONTH":n.mode==="week"&&(s="groups.POST_THRESHOLD_WEEK"),e.push({field:this.intlMessage({intlName:s,count:n.count,timeframe:n.mode})})),r&&(i=this.makeAcceptedContentTypes(r),o=this.makeAcceptedSafetyLevels(r),e.push({field:this.intlMessage({intlName:"groups.ACCEPTED_CONTENT_TYPES"})+" "+i.map(function(e){return"<b>"+e+"</b>"}).join(", ")}),e.push({field:this.intlMessage({intlName:"groups.ACCEPTED_SAFETY_LEVELS"})+" "+o.map(function(e){return"<b>"+e+"</b>"}).join(", ")}));return e},makeAcceptedContentTypes:function(e){var t=[],n={photosOk:"groups.PHOTOS",videosOk:"groups.VIDEOS",imagesOk:"groups.IMAGES",artOk:"groups.ART",screensOk:"groups.SCREENSHOTS"},r,i=this,s=function(e){t.push(i.intlMessage({intlName:e}))};for(r in n)e[r]&&s(n[r]);return t},makeAcceptedSafetyLevels:function(e){var t=[],n={safeOk:"groups.SAFE",moderateOk:"groups.MODERATE",restrictedOk:"groups.RESTRICTED"},r,i=this,s=function(e){t.push(i.intlMessage({intlName:e}))};for(r in n)e[r]&&s(n[r]);return t},buildHeadContainer:function(){if(this.get("groupPoolModel")){var t=this.get("groupModel"),n=this.get("groupPoolModel"),r=this.get("groupInfoModel"),i=n.getValue("photoPageList").getList(),s="summary",o=[],u,a,f=(this.pageParams.nominalPage-1)*this.pageParams.viewPageSize||0,l=r.getValue("description"),c;if(this.isTwitterbot&&i.length>=4){s="gallery";for(c=f;c<4;c++)try{o.push({property:"twitter:image"+c,content:i[c].getSizeToFit({width:640,height:640}).url})}catch(h){}}if(i.length>0)try{u=i[f].getSizeToFit({width:640,height:640})}catch(h){u={}}else u={};a=this.templates("dynamic-page-head")({title:t.getValue("title"),description:l,url:t.getValue("url"),fullURL:e.url(t.getValue("url")),openGraphImageURL
:u.url?e.URLHelper.addProtocolToURL(u.url):null,openGraphaImageWidth:u.width,openGraphaImageHeight:u.height,twitterCardType:s,ownerURL:"/groups"+t.getValue("pathAlias"),twitterImages:o,flickrType:"group",domain:e.url(),feeds:[{title:this.intlMessage({intlName:"meta.GROUP_POOL_ATOM_TITLE",groupName:t.getValue("title")}),url:"/services/feeds/groups_pool.gne?id="+t.getValue("id")+"&lang="+this.appContext.lang.toLowerCase()+"&format=atom"},{title:this.intlMessage({intlName:"meta.GROUP_DISCUSSIONS_ATOM_TITLE",groupName:t.getValue("title")}),url:"/services/feeds/groups_discuss.gne?id="+t.getValue("id")+"&lang="+this.appContext.lang.toLowerCase()+"&format=atom"}]}),a+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, initial-scale=1, maximum-scale=1"}),a+=this.templates("head-link")({rel:"canonical",href:e.url(t.getValue("url"))}),this.set("headContainer",a),YUI.Env.isServer||this.updateHead()}}},{ATTRS:{spaceid:{value:792600549}}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","footer-full-view","group-top-contributors-view","group-18-plus-confirmation-view","group-pool-preview-view","hermes-template-group-home-page","hermes-template-dynamic-page-head","storage-helper","opt-out-widget-view","group-blast-view","fluid-magic-groups-subnav-view","fluid-group-coverphoto-view","groups-toolbar-view","hermes-template-head-link","hermes-template-head-meta"],langBundles:["groups","common","meta"]});
YUI.add("hermes-lang-meta",function(e,t){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"photo on Flickr!",other:"${#} photos on Flickr!"}}],PHOTOSTREAM_NO_PHOTOS:["Explore ","${username}","'s photos on Flickr!"],ALBUMS_LIST:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"album on Flickr!",other:"${#} albums on Flickr!"}}],ALBUMS_LIST_NO_ALBUMS:["Explore ","${username}","'s albums on Flickr!"],FAVORITES:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"favorites on Flickr!",other:"${#} favorites on Flickr!"}}],FAVORITES_NO_PHOTOS:["Explore ","${username}","'s favorites on Flickr!"],META_DESCRIPTION_BY_USER_ON_FLICKR:["By ","${username}"," on Flickr"],PHOTOSTREAM_ATOM_TITLE:["Flickr: ","${username}","'s Photostream Atom feed"],FAVORITES_ATOM_TITLE:["Flickr: ","${username}","'s Favorites Atom feed"],GROUP_POOL_ATOM_TITLE:["Flickr: ","${groupName}","'s Photos Atom feed"],GROUP_DISCUSSIONS_ATOM_TITLE:["Flickr: ","${groupName}","'s Discussions Atom feed"]})},"@VERSION@",{requires:["intl"]});
