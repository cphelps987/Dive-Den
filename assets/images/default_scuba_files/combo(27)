YUI.add("hermes-template-group-discussion-view",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"	<div class='error-state'>\n		<p>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.GROUP_DISCUSSION_LOADING_ERROR"},data:i}))+"<p>\n		<p><a href='#' class='retry'>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"groups.RETRY"},data:i}))+"</a></p>\n	</div>\n"},3:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.loading:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))!=null?s:""},4:function(e,t,n,r,i){return"		<div class='loading'></div>\n"},6:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.discussions:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(44,i,0),data:i}))!=null?s:""},7:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"\n"+((s=n["if"].call(o,t!=null?t.titleKey:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n.unless.call(o,t!=null?t.discussionLocked:t,{name:"unless",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n			<a class="search-icon" data-track="addContextGroupDiscussion" title="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.SEARCH_DISCUSSIONS"},data:i}))+'"></a>\n			<table class="with-avatar">\n				<tbody>\n					<tr class="header">\n						<th class="'+((s=n["if"].call(o,t!=null?t.shorterTitleLongerRecent:t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.program(18,i,0),data:i}))!=null?s:"")+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.DISCUSSION_TITLE"},data:i}))+'</th>\n						<th class="col20">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.DISCUSSION_AUTHOR"},data:i}))+'</th>\n						<th class="col10 align-right">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.DISCUSSION_REPLIES"},data:i}))+'</th>\n						<th class="col20">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.DISCUSSION_LAST_REPLIER"},data:i}))+'</th>\n						<th class="'+((s=n["if"].call(o,t!=null?t.shorterTitleLongerRecent:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.program(22,i,0),data:i}))!=null?s:"")+' align-right">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.DISCUSSION_LAST_POST"},data:i}))+"</th>\n					</tr>\n"+((s=n.each.call(o,t!=null?t.discussions:t,{name:"each",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+"				</tbody>\n			</table>\n\n"+((s=n["if"].call(o,t!=null?t.showMoreButton:t,{name:"if",hash:{},fn:e.program(42,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},8:function(e,t,n,r,i){var s;return"				<h2>\n"+((s=n["if"].call(t!=null?t:{},t!=null?t.showMoreButton:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.program(11,i,0),data:i}))!=null?s:"")+"				</h2>\n"},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'						<a href="/groups/'+a((s=(s=n.groupId||(t!=null?t.groupId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"groupId",hash:{},data:i}):s))+'/discuss/" data-track="groupDiscussionHeadingClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"</a>\n"},11:function(e,t,n,r,i){return"						"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:t!=null?t.titleKey:t},data:i}))+"\n"},13:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isMember:t,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:""},14:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<a href="'+a((s=(s=n.addTopicUrl||(t!=null?t.addTopicUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"addTopicUrl",hash:{},data:i}):s))+'" class="add butt" data-track="groupDiscussionAddClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_DISCUSSION_START"},data:i}))+"</a>\n"},16:function(e,t,n,r,i){return"col35"},18:function(e,t,n,r,i){return"col40"},20:function(e,t,n,r,i){return"col15"},22:function(e,t,n,r,i){return"col10"},24:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=e.lambda,f=e.escapeExpression,l=n.helperMissing,c="function";return"					<tr "+((s=n["if"].call(u,t!=null?t.isLocked:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n						<td class="'+((s=n["if"].call(u,t!=null?t.hasNewActivity:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n							'+((s=n["if"].call(u,t!=null?t.isSticky:t,{name:"if",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n\n							<a title="'+f(a(t!=null?t.subject:t,t))+'" href="'+f(a(t!=null?t.url:t,t))+'" data-track="groupDiscussionTopicSubjectClick">'+f(a(t!=null?t.subject:t,t))+'</a>\n						</td>\n						<td class="'+((s=n["if"].call(u,t!=null?t.hasNewActivity:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=n["if"].call(u,t!=null?t.authorIsDeleted:t,{name:"if",hash:{},fn:e.program(31,i,0),inverse:e.program(35,i,0),data:i}))!=null?s:"")+'						</td>\n						<td class="align-right '+((s=n["if"].call(u,t!=null?t.hasNewActivity:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n							<a href="'+f(a(t!=null?t.lastReplyUrl:t,t))+'" data-track="groupDiscussionTopicReplyCountClick">'+f(a(t!=null?t.countReplies:t,t))+'</a>\n						</td>\n						<td class="'+((s=n["if"].call(u,t!=null?t.hasNewActivity:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=n["if"].call(u,t!=null?t.lastReplierIsDeleted
:t,{name:"if",hash:{},fn:e.program(37,i,0),inverse:e.program(40,i,0),data:i}))!=null?s:"")+'						</td>\n						<td class="align-right '+((s=n["if"].call(u,t!=null?t.hasNewActivity:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n							<a href="'+f((o=(o=n.lastReplyUrl||(t!=null?t.lastReplyUrl:t))!=null?o:l,typeof o===c?o.call(u,{name:"lastReplyUrl",hash:{},data:i}):o))+'">\n								'+f((o=(o=n.dateSinceLastPost||(t!=null?t.dateSinceLastPost:t))!=null?o:l,typeof o===c?o.call(u,{name:"dateSinceLastPost",hash:{},data:i}):o))+"\n							</a>\n						</td>\n					</tr>\n"},25:function(e,t,n,r,i){return'class="is-locked"'},27:function(e,t,n,r,i){return"emphasis"},29:function(e,t,n,r,i){return'<span class="sticky">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"groups.DISCUSSION_STICKY"},data:i}))+"</span>"},31:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'								<span data-person-nsid="'+u(o(t!=null?t.authorNSID:t,t))+'" class="avatar person tiny no-menu" style="background-image:url('+u(o(t!=null?t.authorBuddyicon:t,t))+');">\n								</span>'+u(o(t!=null?t.authorName:t,t))+((s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"enable-pro-badge",{name:"isFlipped",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},32:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.authorIsPro:t,{name:"if",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:""},33:function(e,t,n,r,i){return'<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>'},35:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'								<a title="'+u(o(t!=null?t.authorName:t,t))+'" href="'+u(o(t!=null?t.authorUrl:t,t))+'" data-track="groupDiscussionTopicAuthorClick">\n								<span data-person-nsid="'+u(o(t!=null?t.authorNSID:t,t))+'" class="avatar person tiny" style="background-image:url('+u(o(t!=null?t.authorBuddyicon:t,t))+');">\n								</span>'+u(o(t!=null?t.authorName:t,t))+((s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"enable-pro-badge",{name:"isFlipped",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n								<span>\n								</a>\n"},37:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'								<span data-person-nsid="'+u(o(t!=null?t.lastReplierNSID:t,t))+'" class="avatar person tiny no-menu" style="background-image:url('+u(o(t!=null?t.lastReplierBuddyicon:t,t))+');"></span>'+u(o(t!=null?t.lastReplierName:t,t))+((s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"enable-pro-badge",{name:"isFlipped",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},38:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.lastReplierIsPro:t,{name:"if",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:""},40:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression;return'								<a title="'+u(o(t!=null?t.lastReplierName:t,t))+'" href="'+u(o(t!=null?t.lastReplierURL:t,t))+'" data-track="groupDiscussionTopicLastReplyUserClick">\n									<span data-person-nsid="'+u(o(t!=null?t.lastReplierNSID:t,t))+'" class="avatar person tiny" style="background-image:url('+u(o(t!=null?t.lastReplierBuddyicon:t,t))+');"></span>'+u(o(t!=null?t.lastReplierName:t,t))+((s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"enable-pro-badge",{name:"isFlipped",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n								</a>\n"},42:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'			<div class="see-all-block">\n				<a href="/groups/'+a((s=(s=n.groupId||(t!=null?t.groupId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"groupId",hash:{},data:i}):s))+'/discuss/" class="see-all-discussions" data-track="groupDiscussionViewAllClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.SEE_ALL_DISCUSSIONS"},data:i}))+"</a>\n			</div>\n"},44:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},t!=null?t.discussionLocked:t,{name:"unless",hash:{},fn:e.program(45,i,0),inverse:e.noop,data:i}))!=null?s:""},45:function(e,t,n,r,i){var s;return"				<div class='empty-state'>\n"+((s=n["if"].call(t!=null?t:{},t!=null?t.isMember:t,{name:"if",hash:{},fn:e.program(46,i,0),inverse:e.program(48,i,0),data:i}))!=null?s:"")+"				</div>\n"},46:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"						<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.NO_DISCUSSIONS"},data:i}))+'</p>\n						<p><a href="'+a((s=(s=n.addTopicUrl||(t!=null?t.addTopicUrl:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"addTopicUrl",hash:{},data:i}):s))+'" data-track="groupDiscussionEmptyAddClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"groups.GROUP_DISCUSSION_START"},data:i}))+"</a></p>\n"},48:function(e,t,n,r,i){var s,o=t!=null?t:{};return"						<p>"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"groups.JOIN_GROUP_TO_START_DISCUSSION"},data:i}))+'</p>\n\n						<div class="empty-state-actions">\n'+((s=n["if"].call(o,t!=null?t.signedIn:t,{name:"if",hash:{},fn:e.program(49,i,0),inverse:e.program(51,i,0),data:i}))!=null?s:"")+"						</div>\n\n"},49:function(e,t,n,r,i){return"								"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["join-group-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},51:function(e,t,n,r,i){return'								<a href="#" class="butt large">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.error:t,{name:"if",hash:{},fn:e.program
(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-discussion-view",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-discussion-view",function(e){e.namespace("Views")[this.name]=e.Base.create("group-discussion-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.groupName=e.groupName,this.showLess=e.showLess!==!1,this.pageParams=e.pageParams||{page:1,fetchPageSize:20},this.titleKey=e.titleKey,this.get("container").get("innerHTML")===""&&this.setContainerWithTemplate("group-discussion-view",{loading:!0,error:!1}),this},subviewConfig:{"join-group-view":{requiredToShowOnClient:!0,doRefreshOnStatusChange:!0,requiredToShowOnServer:!1}},loadState:function(){var t=this;return(new e.FlickrPromise({groupDiscussions:this.appContext.getModel("group-discussions-models",this.groupId),groupActivity:this.appContext.getModel("group-activity-models",this.groupId),group:this.appContext.getModel("group-models",this.groupId),groupInfo:this.appContext.getModel("group-info-models",this.groupId)})).then(function(e){return t.set("groupsDiscussionModel",e.groupDiscussions),t.set("groupActivityModel",e.groupActivity),t.set("groupInfoModel",e.groupInfo),e.groupDiscussions.getValue("discussions").getPage(t.pageParams).then(function(e){t.set("groupsDiscussions",e)})})},buildContainer:function(){var t=this.get("groupsDiscussions"),n=this.get("groupsDiscussionModel"),r,i=this,s=this.get("groupsActivityModel")?this.get("groupsActivityModel").getValue("latestViewedDate"):null,o,u=this.get("groupInfoModel"),a=u.getValue("group"),f=n.getValue("totalItems"),l=n.getValue("discussionLocked")||u.getValue("discussionsLocked"),c=t.map(function(t){return r=t.toJSON(),s&&(o=e.moment(r.dateLastPost).add(2,"w"),r.hasNewActivity=s.diff(o)<0),l&&(r.isLocked=!0),r.dateSinceLastPost=i.intlMessage(e.Handlebars.helpers._friendlySinceDate(r.dateSinceLastPost,!1,!0)),r}),h=!1,p=!1,d=this.appContext.lang.toLowerCase();return this.showLess?(f>this.pageParams.fetchPageSize&&(h=!0),c=c.slice(0,this.pageParams.fetchPageSize)):this.pageParams,["es-us","fr-fr","pt-br","vi-vn","id-id"].indexOf(d)>-1&&(p=!0),this.setContainerWithTemplate("group-discussion-view",{discussions:c,showMoreButton:h,groupId:this.groupId,addTopicUrl:"/groups_newtopic.gne?id="+this.groupId,titleKey:this.titleKey,groupname:this.groupname,loading:!1,error:!1,signedIn:this.appContext.getViewer().signedIn,discussionLocked:this.get("groupsDiscussionModel").getValue("discussionLocked"),isMember:a.getValue("isMember"),isHomePage:this.isHomePage,shorterTitleLongerRecent:p}),this},buildErrorContainer:function(){this.setContainerWithTemplate("group-discussion-view",{error:!0})},handleSearchClick:function(t){e.fire("add-context-to-search-field",{name:this.get("groupInfoModel").getValue("group").getValue("title"),id:this.groupId,type:"group",scope:"discussions"}),t.target.addClass("active")},handleSearchContextRemoval:function(){this.get("container").one(".search-icon").removeClass("active")},activate:function(){var t=this.get("container");return this.appContext.getViewer().signedIn&&this.get("groupActivityModel").registry.groupViewed({group_id:this.groupId,user_id:this.appContext.getViewer().nsid,type:"discussion"},this.appContext),this.appContext.getViewer().signedIn||this.registerEventHandler(t.delegate("click",function(t){e.SigninHelper._redirectToSignin()},".butt")),this.get("groupsDiscussionModel").getValue("totalItems")>0&&(this.registerEventHandler(this.get("container").one(".search-icon").on("click",this.handleSearchClick.bind(this))),this.registerEventHandler(e.on("remove-context-in-search-field",this.handleSearchContextRemoval.bind(this)))),this}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","moment","hermes-template-group-discussion-view","signin-helper"],langBundles:["groups","common","discussions","relative-dates"]});
YUI.add("hermes-template-signup-footer",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"mini-footer"},3:function(e,t,n,r,i){return"large-footer"},5:function(e,t,n,r,i){return"has-logo"},7:function(e,t,n,r,i){return'		<div class="close-x"></div>\n'},9:function(e,t,n,r,i){var s;return(s=(n.isFlipped||t&&t.isFlipped||n.helperMissing).call(t!=null?t:{},"mini-signup-footer-avatar",{name:"isFlipped",hash:{},fn:e.program(10,i,0),inverse:e.program(12,i,0),data:i}))!=null?s:""},10:function(e,t,n,r,i){var s;return'			<div class="avatar person" style="background-image: url('+e.escapeExpression((s=(s=n.buddyIcon||(t!=null?t.buddyIcon:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"buddyIcon",hash:{},data:i}):s))+')"></div>\n'},12:function(e,t,n,r,i){return'			<div class="logo"></div>\n'},14:function(e,t,n,r,i){return'		<div class="logo"></div>\n'},16:function(e,t,n,r,i){return"mini"},18:function(e,t,n,r,i){return"large"},20:function(e,t,n,r,i){return"miniSignupFooterSignupClick"},22:function(e,t,n,r,i){return"signupFooterSignupClick"},24:function(e,t,n,r,i){return"miniSignupFooterSigninClick"},26:function(e,t,n,r,i){return"signupFooterSigninClick"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<div class="signup-footer '+((s=n["if"].call(u,t!=null?t.isMiniFooter:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+" "+((s=(n.isNotFlipped||t&&t.isNotFlipped||a).call(u,"mini-signup-footer-avatar",{name:"isNotFlipped",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=(n.isFlipped||t&&t.isFlipped||a).call(u,"mini-signup-footer-cancellable",{name:"isFlipped",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,t!=null?t.isProfilePage:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.program(14,i,0),data:i}))!=null?s:"")+'	<p class="truncate">'+f((o=(o=n.message||(t!=null?t.message:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"message",hash:{},data:i}):o))+'</p>\n	<a href="/signup" class="'+((s=n["if"].call(u,t!=null?t.isMiniFooter:t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.program(18,i,0),data:i}))!=null?s:"")+' butt" data-track="'+((s=n["if"].call(u,t!=null?t.isMiniFooter:t,{name:"if",hash:{},fn:e.program(20,i,0),inverse:e.program(22,i,0),data:i}))!=null?s:"")+'">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"sohp.SIGN_UP_WITH_YAHOO"},data:i}))+'</a>\n	<p class="signin">or <a href="/signin" data-track="'+((s=n["if"].call(u,t!=null?t.isMiniFooter:t,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.program(26,i,0),data:i}))!=null?s:"")+'">'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a><p>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/signup-footer",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("signup-footer-view",function(e,t){"use strict";var n=200;e.namespace("Views").SignUpFooterView=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.set("pageNSID",e.nsid),this.set("groupID",e.groupId),this.set("pageType",e.pageType!==undefined?e.pageType:"profile"),this.set("messageIntlName",e.messageIntlName),this.set("query",e.searchTerm),e.isMobile||!this.appContext.flipper.isFlipped("enable-mini-sign-up-footer")||this.appContext.getViewer().signedIn||this.appContext.lang!=="en-US"?this.set("showPopup",!1):this.set("showPopup",!0),this.appContext.flipper.isFlipped("enable-large-sign-up-footer")?(this.set("modalType",""),this.set("beaconPrefix","signupFooter")):(this.set("modalType","mini"),this.set("beaconPrefix","miniSignupFooter"))},loadState:function(){var t=this;return this.get("showPopup")?this.get("pageType")==="profile"?this.appContext.getModel("person-models",this.get("pageNSID")).then(function(e){t.set("personModel",e)}):this.get("pageType")==="group"?this.appContext.getModel("group-info-models",this.get("groupID")).then(function(e){t.set("groupModel",e)}):e.Promise.resolve():e.Promise.resolve()},buildContainer:function(){var t={isProfilePage:this.get("pageType")==="profile"||this.get("pageType")==="group"};return this.get("showPopup")?(this.get("pageType")==="profile"?(t.buddyIcon=this.appContext.flipper.isFlipped("mini-signup-footer-avatar")?this.get("personModel").getValue("buddyicon").default:"",t.message=this.intlMessage({intlName:"growth.MINI_SIGNUP_FOOTER_MESSAGE",username:e.flutil.unescape(this.get("personModel").getValue("displayname"))})):this.get("pageType")==="explore"?t.message=this.intlMessage({intlName:"growth.MINI_SIGNUP_FOOTER_MESSAGE_EXPLORE"}):this.get("pageType")==="group"?(t.buddyIcon=this.appContext.flipper.isFlipped("mini-signup-footer-avatar")?this.get("groupModel").getValue("group").getValue("bestIconURL"):"",t.message=this.intlMessage({intlName:"growth.MINI_SIGNUP_FOOTER_MESSAGE",username:e.flutil.unescape(this.get("groupModel").getValue("group").getValue("title"))})):t.message=this.intlMessage({intlName:"growth.MINI_SIGNUP_FOOTER_MESSAGE_SEARCH",query:this.get("query")}),this.get("modalType")==="mini"&&(t.isMiniFooter=!0),this.setContainerWithTemplate("signup-footer",t),this):this},activate:function(){if(!this.get("showPopup"))return;this.initialScroll=e.config.win.pageYOffset,this.signupFooterNode=this.get("container").one(".signup-footer"),this.signupFooterHeight=parseInt(this.signupFooterNode.getStyle("height"),10),this.signupFooterOffset=parseInt(this.signupFooterNode.getStyle("bottom"),10),this.registerEventHandler(e.globalEvents.subscribe("window:scroll:nothrottle",this.handleScroll.bind(this))),this.appContext.flipper.isFlipped("mini-signup-footer-cancellable")&&this.get("container").one(".close-x")&&this.registerEventHandler(this.get("container").one(".close-x").on("click",this.handleCancelClick.bind(this))),this.footerContainer=e.one(".footer-full-view"),this.footer=this.footerContainer?e.one("footer.foot"):null},showMiniSignupFooter:function(){var t,n=e.StorageHelper.getItem("miniSignupFooterSeen"),r;return n?(n=e.moment(n,"x"),r=e.moment().subtract(1,"days"),r>n&&(t=!0)):t=!0,t},handleCancelClick:function(n){this.signupFooterNode&&(this.signupFooterNode.removeClass("show"),this.signupFooterNode.removeClass("footer-bottom")),e.rapidTracker.beacon(t,this.get("beaconPrefix")+"CancelClick"),this.set("showPopup",!1)},handleScroll:function(r){if(!this.get("showPopup"))return;var i=e.config.win.pageYOffset-this.initialScroll,s=i-n,o;Math.abs(i)>n||i<=0?Math.abs(this.signupFooterHeight-s)>=0&&i>0&&(this.signupFooterNode.hasClass("show")||(this.signupFooterNode.addClass("show"),this.set("anchoredToWindowCorner",!0),e.rapidTracker.beacon(t,this.get("beaconPrefix")+"Show"))):this.signupFooterNode.hasClass("show")&&!this.appContext.flipper.isFlipped("mini-signup-footer-cancellable")&&(this.signupFooterNode.removeClass("show"),e.rapidTracker.beacon(t,this.get("beaconPrefix")+"Hide")),o=e.config.win.pageYOffset+this.appContext.viewportData.getHeight()-this.signupFooterOffset,this.footerContainer.getComputedStyle("display")!=="none"&&o>=this.footer.getY()?this.signupFooterNode.hasClass("footer-bottom")||(this.signupFooterNode.addClass("footer-bottom"),this.set("anchoredToWindowCorner",!1)):this.get("anchoredToWindowCorner")||(this.signupFooterNode.removeClass("footer-bottom"),this.set("anchoredToWindowCorner",!0))}},{ATTRS:{isActiveViewAgnostic:{value:!0}}})},"@VERSION@",{requires:["flickr-view","hermes-template-signup-footer","storage-helper","moment","flutil"],optionalRequires:["global-events"],langBundles:["common","sohp","growth"]});
YUI.add("hermes-lang-discussions",function(e,t){e.Intl.add("hermes/discussions","en-US",{REPLIES:[{type:"number",valueName:"count"}," replies"],DELETED_USER:["deleted"],RSS:["Feed"],DISCUSSIONS_WITH_TOTAL:["Discussions (",{type:"number",valueName:"count"},")"],ADDTOPIC:["Add topic"],DISCUSSION_LOCK_TOPIC_PROMPT:["Click to lock this topic"],DISCUSSION_UNLOCK_TOPIC_PROMPT:["Click to unlock this topic"],DISCUSSION_TOPIC_REPLY_PROMPT:["Click to reply to the topic"],DISCUSSION_TOPIC_PERMALINK:["Permalink"],DISCUSSION_TOPIC_DELETE_PROMPT:["Click to delete this topic"],DISCUSSION_TOPIC_EDIT_PROMPT:["Click to edit this topic"],DISCUSSION_TOPIC_STICKY_PROMPT:["Click to mark/unmark this topic as sticky"],DISCUSSION_PUBLISH:["Publish"],DISCUSSION_PREVIEW:["Preview"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-sohp",function(e,t){e.Intl.add("hermes/sohp","en-US",{MAIN_BUCKET_HEADLINE:["Flickr. The home for all your photos."],MAIN_BUCKET_HEADLINE_NEW:["The home for all your photos."],MAIN_BUCKET_BODY:["Upload, access, organize, edit, and share your photos from any device, from anywhere in the world."],SIGN_UP_WITH_YAHOO:["Sign up with Yahoo"],SPACE_BUCKET_HEADLINE:["Never delete a photo again"],SPACE_BUCKET_BODY:["Get 1,000GB of free photo storage. We\u2019ll even help you automatically backup your entire collection."],PLATFORMS_BUCKET_HEADLINE:["Your photos from anywhere"],PLATFORMS_BUCKET_BODY:["Wherever you go your photos will follow you. See, edit, and share with our award-winning apps."],LEARN_MORE:["Learn more"],SEARCH_BUCKET_HEADLINE:["A quantum leap in search"],SEARCH_BUCKET_BODY:["We've made strides with photo search. It's now the fastest, easiest way to find the exact photo you want."],INSPIRATION_BUCKET_HEADLINE:["Breath-taking inspiration"],INSPIRATION_BUCKET_BODY:["Find beautiful photos shared by a community of amateur and professional photographers."],TAKE_MY_BREATH_AWAY:["Take my breath away"],GET_STARTED_WITH_STORAGE:["Get started with your free 1,000GB of photo storage"],INSPIRE_ME:["Inspire me"],SIGN_IN:["sign in"],PAGE_TITLE:["Flickr | The home for all your photos | Get 1,000GB free photo storage"],PAGE_DESCRIPTION:["The home for all your photos.  Upload, access, organize, edit, and share your photos from any device, from anywhere in the world.  Get 1,000GB of photo storage free."],SOHP_COMMUNITY_HEADLINE:["Your home for inspiring photography."],SOHP_COMMUNITY_SUBTITLE:["Discover the most interesting photos in the world."],SOHP_COMMUNITY_TITLE_INSPIRE:["Get Inspired"],SOHP_COMMUNITY_BODY_INSPIRE:["Browse trending photos every day from some of the biggest names in the world like NASA, The White House, Cuba Gallery."],SOHP_COMMUNITY_TITLE_PASSION:["Explore your passion"],SOHP_COMMUNITY_BODY_PASSION:["Connect with a dynamic community to  explore any interest you can imagine."],SOHP_COMMUNITY_TITLE_FIND:["Find the perfect photo"],SOHP_COMMUNITY_BODY_FIND:["Search over 12 billion photos like never before, by color, aesthetics, and licence type.  Your presentations will thank you."],SOHP_COMMUNITY_FOOTER:["Join the world's largest photography community"],SOHP_MANAGEMENT_HEADLINE:["The home for all your photos"],SOHP_MANAGEMENT_SUBTITLE:["Private photo management for all your devices."],SOHP_MANAGEMENT_TITLE_STORAGE:["Expansive storage"],SOHP_MANAGEMENT_BODY_STORAGE:["Never delete a photo or video again with 1,000 GB of free storage."],SOHP_MANAGEMENT_TITLE_BACKUP:["Automated backup"],SOHP_MANAGEMENT_BODY_BACKUP:["Automatically back up your entire collection from your computer, iOS, and Android device."],SOHP_MANAGEMENT_TITLE_ORGANIZATION:["Simple organization"],SOHP_MANAGEMENT_BODY_ORGANIZATION:["Organize hundreds of photos and videos using the camera roll view."],SOHP_MANAGEMENT_TITLE_SEARCH:["Smart search"],SOHP_MANAGEMENT_BODY_SEARCH:["Easily find the exact photo you want with our intelligent photo search."],SOHP_MANAGEMENT_TITLE_ACCESS:["Easy access"],SOHP_MANAGEMENT_BODY_ACCESS:["Access your photos and videos from anywhere with our award-winning apps."],SOHP_MANAGEMENT_TITLE_SHARING:["Seamless sharing"],SOHP_MANAGEMENT_BODY_SHARING:["Share your memories privately on any social network."],SOHP_MANAGEMENT_FOOTER:["Get started with your free 1,000 GB of photo storage"],SOHP_TITLE_INSPIRATION:["Find your inspiration."],SOHP_BODY_INSPIRATION:["Join the Flickr community, home to 13 billion photos, 120 million people, and 2 million groups."],SOHP_BODY_INSPIRATION_MOD:["Join the Flickr community, home to 13 billion photos and 2 million groups."]})},"@VERSION@",{requires:["intl"]});
